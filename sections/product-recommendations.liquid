{%- if section.settings.show_product_recommendations -%}
  {%- if recommendations.performed -%}
    {%- if recommendations.products_count > 0 -%}
	  {%- assign slider_mode = true -%}
      <style>
      .slider-desktop {
        display: none;
      }
      .slider-mobile .tt-carousel-products {
        justify-content: flex-start;
        overflow: auto;
        width: 100vw;
        flex-wrap: nowrap;
        white-space: nowrap;
        display: flex;
      }
      .slider-mobile .tt-carousel-products::-webkit-scrollbar {
        width: 0;
        background: transparent;
      }
      .slider-mobile .tt-carousel-products::-webkit-scrollbar-thumb {
        background: transparent;
      }
      .slider-mobile .tt-carousel-products .tt-product {
        white-space: normal;
      }
      .slider-mobile .tt-description .tt-price {
        text-align: left;
        font-size: 14px;
        font-weight: 600;
        margin-top: 8px;
      }
      .slider-mobile .tt-description .tt-price .new-price {
        width: 100%;
        margin: 0;
      }
      .slider-mobile .tt-description .tt-price .old-price {
        font-size: 10px;
        font-weight: 300;
        line-height: 15px;
        margin-top: 6px;
        color: #364158;
      }
      .slider-mobile .tt-description .jdgm-prev-badge,
      .slider-desktop .tt-description .jdgm-prev-badge {
        text-align: left;
      }
      .slider-mobile .tt-description .jdgm-prev-badge__text {
        display: none;
      }
      .slider-desktop .tt-product span.tt-img,
      .slider-mobile .tt-product span.tt-img {
        height: auto !important;
      }
      @media screen and (min-width: 480px) {
        .slider-mobile {
          display: none;
        }
        .slider-desktop {
          display: block;
        }
        .slider-desktop .tt-description .tt-price {
          text-align: left;
          font-size: 14px;
          font-weight: 600;
          margin-top: 8px;
        }
      }
      </style>
      <div class="container container-fluid-custom-mobile-padding slider-desktop">
        <div class="tt-block-title text-left">
          {%- if section.settings.heading != blank -%}<h2 class="tt-title-small">{{ section.settings.heading }}</h2>{%- endif -%}
        </div>
        <div class="tt-carousel-products row arrow-location-tab tt-alignment-img tt-layout-product-item" data-slick='{"slidesToShow": 4, "slidesToScroll": 4}'>
          {%- for product in recommendations.products -%}
          {%- if product.title != blank -%}<div class="col-5 col-md-4 col-lg-3">{%- include 'product-grid-item' -%}</div>{%- endif -%}
          {%- endfor -%}
        </div>
      </div>
      <div class="container container-fluid-custom-mobile-padding slider-mobile">
        <div class="tt-block-title text-left">
          {%- if section.settings.heading != blank -%}<h2 class="tt-title-small">{{ section.settings.heading }}</h2>{%- endif -%}
        </div>
        <div class="tt-carousel-products row arrow-location-tab tt-alignment-img tt-layout-product-item" data-slick='{"slidesToShow": 4, "slidesToScroll": 4}'>
          {%- for product in recommendations.products -%}
          {%- if product.title != blank -%}<div class="col-5 col-md-4 col-lg-3">{%- include 'product-grid-item' -%}</div>{%- endif -%}
          {%- endfor -%}
        </div>
      </div>
    {%- endif -%}
  {%- else  -%}
	<div class="container-indent" data-product-id="{{ product.id }}" data-section-id="{{ section.id }}" data-limit="8" data-section-type="product-recommendations" data-sectionname="product-recommendations"></div>
  {%- endif -%}
{%- endif -%}

{% schema %}
{
  "name": "Product recommendations",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_product_recommendations",
      "label": "Show dynamic recommendations",
      "info": "Dynamic recommendations change and improve over time. [Learn more](https://help.shopify.com/en/themes/development/recommended-products)",
      "default": true
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "You may also like"
    }
  ]
}
{% endschema %}
