<script>
  {% assign vd_url = 'https://aiod.cirkleinc.com' %}
  {% assign csapps_page_type = "" %}
  window.csapps = {
    shop_slug: "{{ shop.permanent_domain | remove: '.myshopify.com' }}",
    store_id: "{{ shop.permanent_domain }}",
    store_domain: "{{ shop.domain }}",
    money_format: "{{ shop.money_format | replace: '"', "'" }}",
    cart: null,
    product: null,
    product_collections: null,
    product_variants: null,
    is_volume_discount: null,
    is_bundle_discount: null,
    bundle_class: '.aiod-bundle-discount-wrap',
    product_id: null,
    page_type: null,
    vd_url: '{{ vd_url }}',
    customer: null,
    currency_symbol: "{%- for currency in shop.enabled_currencies -%} {%- if currency.iso_code == shop.currency -%}{{ currency.symbol }}{%- break -%}{%- endif -%}{%- endfor -%}"
  }
  window.csapps.page_type = "index";
  {% if customer %}
  window.csapps.customer = {
    id: {{ customer.id }}
  }
    {% endif %}
    {% if template contains "cart" %}
    window.csapps.page_type = "cart";
    {% endif %}
    window.csapps.cart = {{ cart | json }}
    if (typeof window.csapps.cart.items == "object") {
    for (var i = 0; i < window.csapps.cart.items.length; i++) {
    ["sku", "grams", "vendor", "url", "image", "handle", "requires_shipping", "product_type", "product_description"].map(function (a) {
    delete window.csapps.cart.items[i][a]
  })
  }
  }
  window.csapps.cart_collections = {}
  {% for item in cart.items %}
  window.csapps.cart_collections["{{ item.variant_id }}"] = []
                                 {% for c in item.product.collections %}
                                 window.csapps.cart_collections["{{ item.variant_id }}"].push({{ c.id }})
                                 {% endfor %}
                                 {% endfor %}

                                 {% if template contains "product" %}
                                 {%- assign current_variant = product.selected_or_first_available_variant -%}
                                 window.csapps.page_type = "product"
                                 window.csapps.product_id = "{{ product.id }}";
                                 window.csapps.product = {{ product | json }}


                                 window.csapps.product_collection = []
  {% for collection in product.collections %}
  window.csapps.product_collection.push({{ collection.id }})
  {% endfor %}

  window.csapps.product_variant = []
  {% for variant in product.variants %}
  window.csapps.product_variant.push({{ variant.id }})
  {% endfor %}

  window.csapps.product_collections = window.csapps.product_collection.toString();
  window.csapps.product_variants = window.csapps.product_variant.toString();

  {% endif %}

  {% if template contains "collection" %}
  {% unless template contains "list-collections" %}
  window.csapps.page_type = "collection";
  window.csapps.collection_id = "{{ collection.id }}";
  {% endunless %}
  {% endif %}

</script>

{% if template contains "cart" %}
<div class="edit_popup" style="display: none;">
  <form method="post" action="/cart/add" id="edit_cart_popup" class="edit_form" enctype="multipart/form-data">
  </form>
</div>
{% endif %}

{% comment %}<link href="{{ vd_url }}/frontcripts/csapp_all_in_one.min.css?v={{ 'now' | date: '%s' }}" rel="stylesheet" type="text/css" media="all">{% endcomment %}
{% comment %}<script src="{{ vd_url }}/frontcripts/cscodejs.min.js?v={{ 'now' | date: '%s' }}" defer="defer"></script>{% endcomment %}


<style type="text/css">
  .cs_offer_content_wp {
    width: 100%;
    display: flex;
    flex-wrap: wrap;
    align-content: center;
  }

  .cs_offer_content_wp p a {
    text-decoration: underline;
  }

  .is_grid_thumb {
    flex: 1 0 33.33%;
    max-width: 33.33%;
    padding: 0 5px 10px 5px;
    position: relative;
  }

  .is_grid_thumb .grid_inner, .csapp-thumb-inner {
    background: #FFFFFF;
    border: 1px solid #EEEEEE;
    padding: 10px;
    border-radius: 5px;
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  .csapps-p-detail .csapps-p-title a {
    font-size: 18px;
    line-height: 1.2;
    color: #1C1C1C;
    margin: 0 0 15px;
    font-weight: normal;
    border-bottom: 0;
    display: block;
    width: 100%;
    text-decoration: none;
  }

  .g_b_w {
    order: 3;
  }

  .cs_p_c_m .csapps-price {
    order: 1;
    margin: 0 0 15px;
    color: #1C1C1C;
    font-weight: normal;
    font-size: 18px;
  }

  .cs_p_c_m .csapps-price del {
    color: #BDC1CC;
    margin-left: 12px;
  }

  .offer-wrpper + .offer-wrpper {
    display: none;
  }

  .csapps-bunlde-wrapper {
    display: flex;
    flex-wrap: wrap;
    background: #f9f9f9;
    padding: 10px;
    justify-content: center;
  }

  .csapps-bundle-thumb {
    max-width: 50%;
    width: 100%;
    padding: 5px;
    position: relative;
  }

  .desk_layout_one_grid .csapps-bundle-thumb {
    max-width: 100%;
    width: 100%;
  }

  .desk_layout_two_grid .csapps-bundle-thumb {
    max-width: 50%;
    width: 100%;
  }

  .desk_layout_three_grid .csapps-bundle-thumb {
    max-width: 33.33%;
    width: 100%;
  }

  .desk_layout_four_grid .csapps-bundle-thumb {
    max-width: 25%;
    width: 100%;
  }

  .desk_layout_two_grid .csapps-bundle-thumb:nth-child(2n) .csapp-thumb-inner:after,
  .desk_layout_three_grid .csapps-bundle-thumb:nth-child(3n) .csapp-thumb-inner:after,
  .desk_layout_four_grid .csapps-bundle-thumb:nth-child(4n) .csapp-thumb-inner:after,
  .csapps-bundle-thumb:last-child .csapp-thumb-inner:after {
    content: none;
  }

  .csapps-bunlde-tiers .csapp-thumb-inner > a {
    text-align: center;
    display: block;
  }

  .csapp_bundle_title {
    margin: 10px 0;
    text-align: center;
    line-height: 1;
  }

  .csapps-bunlde-tiers .csapps-bunlde_desc {
    margin: 10px 0;
    font-size: 14px;
    line-height: 1;
    text-align: center;
  }

  .csapps-p-detail .csapps-p-title {
    line-height: 1;
  }

  .csapps-p-detail .csapp-variant-title {
    margin: 0 0 5px;
  }

  .csapps-bunlde-tiers .csapp_total_bundle {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    justify-content: space-between;
  }

  .csapp-thumb-inner::after {
    content: "+";
    height: 30px;
    width: 30px;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 1;
    background-color: #008060;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    right: -15px;
    font-family: serif;
    font-weight: bold;
  }

  .csapps-p-detail .csapps-price {
    display: flex;
    margin-bottom: 15px;
  }

  .csapps-price del {
    display: block;
    margin-left: 5px;
  }

  .product-single__meta .product-form {
    max-width: inherit;
  }

  .cs_single_op_selector {
    padding: 5px 25px 5px 10px;
    min-height: inherit;
    margin-bottom: 8px;
    width: 100%;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-position: right center;
    background-image: url(https://aiod.cirkleinc.com/images/arrow-down.svg);
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-color: #ffffff;
    cursor: pointer;
    background-size: 15px;
    border: 1px solid #EEEEEE;
    border-radius: 5px;
    order: 2;
    margin: 0 0 15px;
    font-size: 16px;
  }

  .csapps-p-detail .csapp-select-option-selector:focus, .csapps-p-detail .bodo_grid_select:focus, .csapps-p-detail .free_p_grid_select:focus {
    outline: none;
  }

  .csapp_load_more {
    text-align: center;
  }

  .load_more_bundle {
    box-shadow: none;
    border: none;
    background: #008060;
    color: #fff;
    font-size: 18px;
    padding: 10px 20px;
    margin: 15px 0;
  }

  .csapps-table {
    border: 0;
    margin: 0;
    min-width: 100%;
    max-width: 100%;
  }

  .aiod-volume-discount-wrap {
    width: 100%;
  }

  .aiod-volume-discount-wrap .volume_required_msg {
    width: 100%;
    display: block;
    font-size: small;
  }

  .csapps-table td {
    border: 0;
    padding: 12px 15px;
  }

  .csapps-table tbody tr:last-child td {
    border-bottom: 0;
  }

  .csapps-bunlde-tiers .csapps-error p {
    margin: 10px 0 0 0;
    color: #ff0000;
    font-weight: bold;
    text-align: center;
  }

  .csapp_btn {
    background-color: #008060;
    border: 1px Solid #008060;
    border-radius: 5px;
    color: #FFFFFF;
    font-size: 16px;
    font-style: normal;
    padding: 10px 20px;
    cursor: pointer;
    line-height: 1.2;
  }

  .csapp_btn:disabled {
    opacity: 0.5;
  }

  .g_b_w .csapp_btn {
    width: 100%;
  }

  .csapp-discount-list {
    max-width: max-content;
    width: 100%;
    margin-left: auto;
    display: table;
    vertical-align: middle;
  }

  .csapp-discount-list .discount-label-conatiner {
    display: table-row;
    font-size: 16px;
  }

  .csapps-cart-original-total.discount-price {
    font-size: 16px;
    margin-right: 5px;
  }

  .csapps-cart-total {
    font-size: 18px;
  }

  .csapp-discount-list .discount {
    padding: 5px 0 5px 0;
    display: table-cell;
    line-height: 2;
  }

  .csapp-discount-list .discount .dis-name {
    display: flex;
  }

  .csapp-discount-list .discount .dis-svg {
    line-height: 1.2;
  }

  .csapp-discount-list .discount svg {
    width: 12px;
    height: 12px;
  }

  .csapp-discount-list .discount svg path {
    fill: gray;
  }

  .csapp-discount-list .discount .dis-text {
    padding-left: 5px;
    text-align: left;
    font-weight: normal;
    color: #000;
    line-height: 1.4;
    max-width: 200px;
    font-size: 15px;
    letter-spacing: 0;
    text-transform: none;
  }

  .csapp-discount-list .discount_price {
    color: #000;
    padding: 5px 0px 5px 5px;
    display: table-cell;
    font-size: 15px;
  }

  .csapp-discount-list .discount_price .csapp_money {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding: 5px 5px 5px 20px;
    background: #ddd;
    clip-path: polygon(0% 50%, 25% 100%, 100% 100%, 100% 0%, 25% 0%);
  }

  .cart-subtotal {
    flex-wrap: wrap;
  }

  .csapps-bunlde-tiers .csapp_total_bundle .csapps-total_price,
  .csapps-bunlde-tiers .csapp_total_bundle .csapps-btn_wrapper {
    text-align: center;
    width: 100%;
  }

  .csapps-bunlde-tiers .csapp_total_bundle .csapps-total_price {
    margin: 10px 0;
  }

  .csapps-total_price del {
    margin-right: 5px;
  }

  .csapps-bundle-thumb img {
    display: block;
    margin: 0 auto;
  }

  .cart__subtotal-container {
    display: flex;
    justify-content: flex-end;
  }

  .cart__subtotal {
    text-align: right;
  }

  .aiod-volume-discount-wrap tr:first-child th:after, .aiod-volume-discount-wrap tr:first-child td:after {
    content: none;
  }

  .csapps-volume-discount-tiers, .cs_bogo_get_pro_wrpr {
    margin-top: 20px;
    margin-bottom: 20px;
    border-radius: 9px;
    overflow: hidden;
  }

  .loader {
    text-align: center;
  }

  .csapps-bunlde-tiers {
    padding-top: 40px;
    padding-bottom: 40px;
  }

  .header__cart-price-bubble span.csapps-cart-original-total.discount-price, .header__cart-price-bubble .csapp-discount-list {
    display: none;
  }

  .aiod-bundle-discount-wrap {
    max-width: 1250px;
    margin: 0 auto;
    padding: 0 15px;
  }

  /*new css*/
  #CartContainer .ajaxcart .ajaxcart__footer.ajaxcart__footer--fixed {
    overflow-y: hidden;
    overflow-x: hidden;
  }

  #CartContainer .ajaxcart__subtotal .grid__item.one-third {
    width: 60%;
  }

  #CartContainer .ajaxcart__subtotal .grid__item.two-thirds {
    width: 40%;
  }

  #CartContainer .csapp-discount-list .discount-label-conatiner {
    display: flex;
    font-size: 16px;
    flex-wrap: nowrap;
  }

  #CartContainer .ajaxcart__subtotal .csapp-discount-list .discount {
    align-items: center;
    display: flex;
  }

  #CartContainer .csapps-cart-total {
    display: block;
  }

  .csapp-variant-title ul {
    list-style-type: none;
  }

  #CartContainer .ajaxcart__subtotal .grid__item.one-third > span {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-end;
    align-items: center;
  }

  .csapps-p-detail {
    margin-top: auto;
    padding: 15px 0 0;
  }

  .csapps-p-detail form {
    display: block;
    margin: 0;
    width: 100%;
  }

  .cs_block_product {
    margin: 0 5px 5px 0;
    border: 1px solid #C9CCCF;
    border-radius: 9px;
    overflow: hidden;
  }

  .cs_bogo_braker {
    font-size: 30px;
  }

  .csapp-products {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
  }

  .csapp-products p {
    margin-bottom: 0;
  }

  .csapp-products a {
    text-decoration: underline;
  }

  .cs_block_product img {
    width: 100%;
    display: block;
  }

  .cs-hover-outer {
    display: none;
    margin-top: 10px;
    position: absolute;
    background-color: #fff;
    padding: 12px 15px;
    box-shadow: 1px 1px 4px 2px #ddd;
    border-radius: 5px;
    z-index: 99;
  }

  .cs_block_product:hover .cs-hover-outer {
    display: block;
  }

  .cs-message em {
    font-size: 13px;
    font-weight: bold;
    border-bottom: 1px dotted;
    margin-bottom: 10px;
    display: block;
  }

  .cs-bogo-name {
    line-height: 18px;
  }

  .aiod-bogo-discount-wrap {
    width: 100%;
    display: block;
  }

  .cs_bogo_get_pro_wrpr {
    border: 1px solid #C9CCCF;
    padding: 12px;
  }

  .cs_bogo_get_pro_wrpr p a {
    text-decoration: underline;
  }

  .top_msg_main {
    position: relative;
  }

  .top_msg_wrpr {
    padding: 10px;
    text-align: center;
    background-color: #efefef;
    position: relative;
  }

  .cs_close {
    position: absolute;
    right: 10px;
    top: 10px;
    cursor: pointer;
    z-index: 1;
  }

  .popup_close {
    position: absolute;
    right: -18px;
    top: -18px;
    border-radius: 50%;
    background-color: black;
    padding: 10px;
    cursor: pointer;
    z-index: 9;
  }

  .cs_close svg, .popup_close svg {
    display: block;
    width: 15px;
    height: 15px;
  }

  .popup_close svg {
    fill: #fff;
  }

  .top_msg_main:not(.csapp_put_left) p {
    max-width: calc(100% - 40px);
    margin: 0 auto;
  }

  .csapp_put_left p {
    max-width: calc(100% - 20px);
    margin-left: 0;
    text-align: left;
  }

  .top_msg_main.csapp_put_full p {
    max-width: 100%;
    text-align: left;
  }

  .top_msg_main.csapp_put_full .top_msg_close {
    display: none;
  }

  .top_msg_wrpr p:not(:last-child) {
    margin-bottom: 8px;
  }

  .top_msg_wrpr p:last-child {
    margin-bottom: 0;
  }

  .cs_volume_msg {
    margin: 8px 0;
  }

  .aiod-wholesale-discount-topbar .top_msg_main {
    margin: 20px 0;
  }

  .bogo_popup, .free_gift_popup {
    position: fixed;
    display: block;
    opacity: 0;
    visibility: hidden;
    transition: 0.4s all;
  }

  .cs_overlay {
    inset: 0;
    background-color: rgba(0, 0, 0, 0.1);
  }

  .cs_bogo_overlay {
    z-index: 999999;
  }

  .cs_free_product_overlay {
    z-index: 99999999;
  }

  .cs_bogo_popup, .cs_free_product_popup {
    top: 50%;
    transform: translate(-50%, -50%);
    left: 50%;
    border-radius: 7px;
    box-shadow: 0 6px 60px 0 #3b3b3b73;
    background-color: #fff;
    width: calc(100% - 40px);
    max-width: 900px;
    max-height: 80vh;
  }

  .cs_bogo_popup {
    z-index: 9999999;
  }

  .cs_free_product_popup {
    z-index: 999999999;
  }

  .cs_bogo_popup_opener, .cs_freeg_popup_opener {
    margin-left: 10px;
  }

  .cs_p_c_m {
    padding: 30px 30px 0;
    overflow: auto;
    max-height: calc(100vh - 150px);
  }

  .csapp_popup_wrpr h4 {
    padding-bottom: 5px;
    margin-bottom: 0;
    text-align: left;
    cursor: pointer;
    color: #1C1C1C;
    font-size: 20px;
    font-weight: bold;
    padding: 15px 0px;
    letter-spacing: 0;
    display: flex;
    align-items: center;
  }

  .csapp_popup_wrpr h4 span {
    margin-right: 25px;
    transform: rotate(0);
    display: flex;
    align-items: center;
    transition: 0.4s all;
  }

  .csapp_popup_wrpr h4 svg, .csapp_popup_wrpr h4 path {
    fill: #1C1C1C;
  }

  .csapp_popup_wrpr h4.active span {
    transform: rotate(-90deg);
  }

  .csapp_popup_wrpr {
    margin: 0;
    border-bottom: 1px solid #eeeeee;
  }

  .cs_offer_content {
    margin-top: 5px;
  }

  .csapp_popup_wrpr .cs_offer_content {
    display: flex;
    justify-content: flex-start;
    overflow-x: auto;
    background: rgb(249 249 249 / 40%);
    padding: 5px;
    border-left: 5px solid #007F60;
    max-height: calc(100vh - 450px);
    margin: 5px 5px 20px;
    align-items: flex-start;
    display: none;
  }

  .csapp_popup_wrpr .cs_offer_content:not(.is_grid) {
    padding-left: 15px;
  }

  .csapp_popup_wrpr:first-child .cs_offer_content {
    display: block;
  }

  .grid_inner a {
    display: block;
    width: 100%;
    text-decoration: none;
  }

  .grid_inner img {
    display: block;
    margin: 0 auto;
  }

  .is_grid_thumb .grid_inner .grid_img, .csapp-thumb-inner .grid_img {
    text-align: center;
  }

  .bogo_popup.cs_show, .free_gift_popup.cs_show {
    opacity: 1;
    visibility: visible;
  }

  .cs-message-heading {
    margin: 0 0 12px 0;
    display: block;
    width: 100%;
  }

  .bogo_desc_content {
    display: block;
    width: 100%;
    margin: 0 0 12px 0;
  }

  #CartContainer .ajaxcart__footer--fixed {
    min-height: 230px;
  }

  #CartContainer .csapp-discount-list .discount-label-conatiner {
    flex-wrap: wrap !important;
    justify-content: flex-end;
  }

  #CartContainer .ajaxcart__footer .two-thirds {
    width: 100%;
  }

  #CartContainer .ajaxcart__footer .grid__item.one-third.text-right {
    width: 100%;
    margin-top: -43px;
  }

  .no_thanks_popup {
    display: block;
    text-align: center;
    cursor: pointer;
    padding: 15px 30px;
    text-decoration: underline;
  }

  [data-csapp_price] .csapp-price s, [data-csapp_price] .csapp-price .cs_final_price, [data-csapp_discount_summery] .discount-label-conatiner, [data-csapp_line_price] .csapp-line-price s, [data-csapp_line_price] .csapp-line-price .cs_final_price {
    width: 100%;
    display: flex;
    justify-content: flex-end;
    align-items: center;
    flex-wrap: wrap;
  }

  [data-csapp_price] .cs_final_price, [data-csapp_line_price] .cs_final_price, [data-csapp_discount_summery] .discount-label-conatiner, [data-csapp_discount_summery] .dis-svg svg, [data-csapp_discount_summery] .dis-svg svg path {
    color: red;
    fill: red;
  }

  [data-csapp_discount_summery] .discount-label-conatiner {
    font-size: 13px;
  }

  [data-csapp_discount_summery] .dis-svg svg {
    width: 12px;
    height: 12px;
    margin-right: 5px;
  }

  [data-csapp_discount_summery] .discount_price {
    margin-left: 5px;
  }

  @media only screen and (min-width: 769px) {
    .cart__row.cart__row--last .push--large--seven-twelfths {
      left: 46.333%;
    }

    .cart__row.cart__row--last .large--five-twelfths {
      width: 54.666%;
    }
  }

  @media only screen and (min-width: 768px) {
    .desk_layout_one_grid .csapp-thumb-inner:after {
      top: 100%;
      bottom: 0;
      left: 50%;
      transform: translate(-50%, -50%);
    }
  }

  @media only screen and (max-width: 992px) {
    .grid_inner .grid_img {
      max-width: 140px;
      margin: 0 auto;
    }

    .cs_bogo_popup, .cs_free_product_popup {
      max-height: 90vh;
    }

    .csapp_popup_wrpr .cs_offer_content {
      max-height: calc(100vh - 290px);
    }
  }

  @media only screen and (max-width: 767px) {
    .mob_layout_two_grid .csapps-bundle-thumb:nth-child(2n) .csapp-thumb-inner:after {
      content: none;
    }

    .mob_layout_two_grid .csapps-bundle-thumb {
      max-width: 50%;
      width: 100%;
    }

    .mob_layout_one_grid .csapps-bundle-thumb {
      max-width: 100%;
      width: 100%;
    }

    .mob_layout_one_grid .csapp-thumb-inner:after {
      top: 100%;
      bottom: 0;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .is_grid_thumb {
      flex: 1 0 200px;
      max-width: 200px;
    }

    .cs_p_c_m {
      padding: 10px 10px 0 10px;
    }

    .cs_bogo_popup_opener, .cs_freeg_popup_opener {
      margin: 10px 0;
    }

    .no_thanks_popup {
      padding: 10px;
    }

    .is_grid_thumb {
      flex: 1 0 50%;
      max-width: 50%;
    }

    .csapp_btn {
      padding: 10px 10px;
    }
  }

  @media only screen and (max-width: 480px) {
    .is_grid_thumb {
      flex: 1 0 100%;
      max-width: 100%;
    }
  }

</style>


<script type="text/javascript">
  window.addEventListener('DOMContentLoaded', function() {
    var PROXY_PATH = "/apps/aiodPro?csapp=aiod";
    var PROXY_PATH_CART = "/apps/aiodPro?view=cart&csapp=aiod", cart_call_timeout = 10000, other_call_timeout = 4000, is_test = '';
    window.csapps.firing_popup = 0, window.csapps.cspriority, window.csapps.bogo_atc = window.csapps.free_g_atc = 'Add To Cart', window.csapps.bogo_soldout = window.csapps.free_g_soldout = 'Sold out', window.csapps.bogo_request_ajax = window.csapps.wholesale_request_ajax = window.csapps.volumn_request_ajax = window.csapps.checkout_request_ajax = window.csapps.normal_cart_ajax = window.csapps.fire_cart_ajax = 'ToCancelPrevReq', window.csapps.top_bar_css = 0, window.csapps.all_products = [], window.csapps.Data_bogo = [], window.csapps.bogo_server_data, window.csapps.wholesale_server_data, window.csapps.table_Data, window.csapps.Data_volume = [], window.csapps.Data_wholesale = [], window.csapps.volumn_is_variant = 0, window.csapps.bogo_is_variant = 0, window.csapps.wholesale_is_variant = 0, window.csapps.bundle_style_cnt = 0, window.csapps.bundle_total_price_text = '', window.csapps.bundle_save_text = '', window.csapps.bundle_not_available = '', close_svg = '<svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-close" viewBox="0 0 40 40"><path d="M23.868 20.015L39.117 4.78c1.11-1.108 1.11-2.77 0-3.877-1.109-1.108-2.773-1.108-3.882 0L19.986 16.137 4.737.904C3.628-.204 1.965-.204.856.904c-1.11 1.108-1.11 2.77 0 3.877l15.249 15.234L.855 35.248c-1.108 1.108-1.108 2.77 0 3.877.555.554 1.248.831 1.942.831s1.386-.277 1.94-.83l15.25-15.234 15.248 15.233c.555.554 1.248.831 1.941.831s1.387-.277 1.941-.83c1.11-1.109 1.11-2.77 0-3.878L23.868 20.015z" class="layer"></path></svg>';
    csapps.set_local_data = function (d_n, d_v) {
      if (typeof (Storage) !== "undefined") {
        localStorage.setItem(d_n, d_v);
      }
    }
    csapps.get_local_data = function (d_n) {
      var storage_data = '';
      if (typeof (Storage) !== "undefined") {
        storage_data = localStorage.getItem(d_n);
      }
      return storage_data;
    }
    csapps.formatMoney = function (t, r) {
      function n(t, r) {
        return void 0 === t ? r : t
      }

      function e(t, r, e, o) {
        if (r = n(r, 2), e = n(e, ","), o = n(o, "."), isNaN(t) || null == t) return 0;
        var a = (t = (t / 100).toFixed(r)).split(".");
        return a[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1" + e) + (a[1] ? o + a[1] : "")
      }

      "string" == typeof t && (t = t.replace(".", ""));
      var o = "",
          a = /\{\{\s*(\w+)\s*\}\}/,
          i = r || this.money_format;
      switch (i.match(a)[1]) {
        case "amount":
          o = e(t, 2);
          break;
        case "amount_no_decimals":
          o = e(t, 0);
          break;
        case "amount_with_comma_separator":
          o = e(t, 2, ".", ",");
          break;
        case "amount_with_space_separator":
          o = e(t, 2, " ", ",");
          break;
        case "amount_with_period_and_space_separator":
          o = e(t, 2, " ", ".");
          break;
        case "amount_no_decimals_with_comma_separator":
          o = e(t, 0, ".", ",");
          break;
        case "amount_no_decimals_with_space_separator":
          o = e(t, 0, ".", "");
          break;
        case "amount_with_space_separator":
          o = e(t, 2, ",", "");
          break;
        case "amount_with_apostrophe_separator":
          o = e(t, 2, "'", ".")
      }
      return i.replace(a, o)
    }
    var wmf = csapps.formatMoney.money_format;

    function imgURL(src, size) {
      return src
      .replace(/_(pico|icon|thumb|small|compact|medium|large|grande|original|1024x1024|2048x2048|master|300x)+\./g, '.')
      .replace(/\.jpg|\.png|\.gif|\.jpeg/g, function (match) {
        return '_' + size + match;
      });
    }

    function csapp_loadScript(url, callback) {
      var script = document.createElement("script");
      script.type = "text/javascript";
      if (script.readyState) {
        script.onreadystatechange = function () {
          if (script.readyState == "loaded" || script.readyState == "complete") {
            script.onreadystatechange = null;
            callback();
          }
        };
      } else {
        script.onload = function () {
          callback();
        };
      }
      script.src = url;
      document.getElementsByTagName("head")[0].appendChild(script);
    }

    function start(jQuerycs) {
      var checkout_selectors = "input[name='checkout']:not(.csapps-ignore), input[value='Checkout']:not(.csapps-ignore), button[name='checkout']:not(.csapps-ignore), [href$='checkout']:not(.csapps-ignore), button[value='Checkout']:not(.csapps-ignore), input[name='goto_pp'], button[name='goto_pp'], input[name='goto_gc'], button[name='goto_gc'],.csapps_checkout"
      var store_id = window.csapps.store_id;
      if (window.csapps.page_type == "product") {
        var variants = window.csapps.product.variants;
        window.csapps.product.selected_variant = null;
        window.product_page_btn_condition = function () {
          var options = [];
          var selector_var = jQuerycs('body .cs_product_form_wrpr').length ? jQuerycs(".cs_product_form_wrpr .single-option-selector") : jQuerycs(".single-option-selector, select.form__input--select, .swatch-element input[type='radio'],.single-option-selector__radio:checked, select[data-option='option1'], select[data-option='option1']:checked, select[data-option='option2'], select[data-option='option2']:checked, select[data-option='option3'], select[data-option='option3']:checked, select[data-index='option1'], select[data-index='option1']:checked, select[data-index='option2'], select[data-index='option2']:checked, select[data-index='option3'], select[data-index='option3']:checked, ul li div[swatch-option='option1'], input[type='radio']:checked");
          jQuerycs(selector_var).each(function (i, selector) {
            options.push(selector.value)
          });
          var grep = function (items, callback) {
            var filtered = [],
                len = items.length,
                i = 0;
            for (i; i < len; i++) {
              var item = items[i];
              var cond = callback(item);
              if (cond) {
                filtered.push(item);
              }
            }
            return filtered;
          };
          options = grep(options, function (n) {
            return (n);
          });
          options.length == 1 ? selected_variant_title = options : selected_variant_title = options.join(' / ');
          if (document.querySelector('.selected_variant span') != null) {
            var variantId = document.querySelector('.selected_variant span').textContent;
          } else {
            Object.keys(variants).forEach(function (key) {
              var val = variants[key];
              selected_variant_title = selected_variant_title.toString().toLowerCase();
              var variantTitle = val.title.toString().toLowerCase();
              if (variantTitle.trim() == selected_variant_title.trim() || variantTitle.trim() == 'default title') {
                var variantId = val.id;
                window.csapps.product.selected_variant = val.id
              }
            });
          }
        }
      }
      window.checkAppInstalled = function (version) {
        window.csapps.is_volume_discount = true
        window.csapps.is_bundle_discount = true
        window.csapps.is_bogo_discount = true
        window.csapps.is_free_gift_discount = true
        window.csapps.is_general_discount = true
        window.csapps.is_wholesale_discount = true
        commonJS(version);
      };
      window.commonJS = function (jQuerycs) {
        jQuerycs(document).one('click', checkout_selectors, function (e) {
          if (jQuerycs('.csapp-discount-list').length || jQuerycs('[data-csapp_price] .csapp-price').length || jQuerycs('[data-csapp_line_price] .csapp-line-price').length || jQuerycs('[data-csapp_discount_summery] .discount-label-conatiner').length) {
            e.preventDefault();
            if (typeof csappsCheckout != "function") {
              window.location = "/checkout";
            } else {
              jQuerycs(this).attr('disabled', 'disabled');
              csappsCheckout();
            }
          } else {
            return true;
          }
        });
        window.csappsDoActions = function (data, discount_type, v_s) {
          if (data) {
            if (typeof data == "object" && typeof data.items == "object") {
              csappsShowCartDiscounts(data, discount_type, v_s)
            }
          }
        }
        window.clickappbundle = function (jQuerycs) {
          jQuerycs(document).on('change', 'select.csapp-select-option-selector', function (e) {
            e.preventDefault();
            var OP_ARRAY = [];
            jQuerycs(this).closest('.csapps-bundle-thumb').find('.csapp-select-option-selector').each(function (OPI, OPV) {
              OP_ARRAY.push(jQuerycs(OPV).val())
            });
            OP_ARRAY = OP_ARRAY.join(' / ');
            jQuerycs(this).closest('.csapps-bundle-thumb').find('select[name="csapps-bundle-name-id"] option[value=""]').remove();
            if (jQuerycs(this).closest('.csapps-bundle-thumb').find('select[name="csapps-bundle-name-id"] option[data-title="' + OP_ARRAY + '"]').length) {
              jQuerycs(this).closest('.csapps-bundle-thumb').find('select[name="csapps-bundle-name-id"] option[data-title="' + OP_ARRAY + '"]').prop("selected", 1).trigger("change");
            }else{
              jQuerycs(this).closest('.csapps-bundle-thumb').find('select[name="csapps-bundle-name-id"]').append('<option value="" data-title="'+ OP_ARRAY +'" data-ptitle="'+ jQuerycs(this).closest('.csapps-bundle-thumb').find('select[name="csapps-bundle-name-id"] option').attr('data-ptitle') +'" data-compare-price="'+ jQuerycs(this).closest('.csapps-bundle-thumb').find('select[name="csapps-bundle-name-id"] option').attr('data-compare-price') +'" data-price="'+ jQuerycs(this).closest('.csapps-bundle-thumb').find('select[name="csapps-bundle-name-id"] option').attr('data-price') +'" data-available="true">'+ OP_ARRAY +'</option>');
              jQuerycs(this).closest('.csapps-bundle-thumb').find('select[name="csapps-bundle-name-id"] option[value=""]').prop("selected", 1).trigger("change");
            }
          });
          jQuerycs('body').on('click', '.load_more_bundle', function (e) {
            e.preventDefault();
            var btn = jQuerycs(this);
            btn.addClass('loading');
            var getUrl = btn.attr('data-next_url'),
                in_append = jQuerycs(this).closest(window.csapps.bundle_class),
                bundle_possiblity = check_bundle_possiblity(in_append);
            bundleTable(getUrl, bundle_possiblity[0], in_append, bundle_possiblity[1]);
          });
          jQuerycs('body').on('click', '.cs_bogo_msg_close', function (e) {
            e.preventDefault();
            remove_bogo_msg();
          });
          jQuerycs('body').on('click', '.cs_general_msg_close', function (e) {
            e.preventDefault();
            remove_general_msg();
          });
          jQuerycs('body').on('click', '.cs_free_p_msg_close', function (e) {
            e.preventDefault();
            remove_free_gift_msg();
          });
          jQuerycs('body').on('click', '.cs_wholesale_msg_close', function (e) {
            e.preventDefault();
            remove_wholesale_msg();
          });
          jQuerycs('body').on('click', '.cs_volume_msg_close', function (e) {
            e.preventDefault();
            jQuerycs(this).closest('.cs_volume_msg').slideUp();
            setTimeout(function () {
              jQuerycs(this).closest('.cs_volume_msg').remove();
            }, 500);
          });
          jQuerycs('body').on('submit', '.single_grid_form', function (e) {
            jQuerycs(this).find('.grid_atc_btn').attr('disabled', 'disabled');
          });
          jQuerycs('body').on('click', '.cs_bogo_popup_opener', function (e) {
            e.preventDefault();
            jQuerycs(this).attr('disabled', 'disabled');
            csapps.set_local_data('csbogo', 0);
            fire_cart_data(1, 'bogo');
          });
          jQuerycs('body').on('click', '.cs_freeg_popup_opener', function (e) {
            e.preventDefault();
            jQuerycs(this).attr('disabled', 'disabled');
            csapps.set_local_data('csfree', 0);
            fire_cart_data(1, 'free');
          });
          jQuerycs('body').on('click', '.cs_bogo_pop_close', function (e) {
            e.preventDefault();
            remove_bogo_popup();
          });
          jQuerycs('body').on('click', '.close_bogo', function (e) {
            e.preventDefault();
            remove_bogo_popup();
            csapps.set_local_data('csbogo', 1);
          });
          jQuerycs('body').on('click', '.cs_freeg_pop_close', function (e) {
            e.preventDefault();
            remove_free_gift_popup();
          });
          jQuerycs('body').on('click', '.close_free', function (e) {
            e.preventDefault();
            remove_free_gift_popup();
            csapps.set_local_data('csfree', 1);
          });
          jQuerycs('body').on('click', '.csapp_popup_wrpr h4', function (e) {
            jQuerycs(".csapp_popup_wrpr h4").removeClass("active");
            jQuerycs(".cs_offer_content").slideUp();
            if (!jQuerycs(this).next().is(":visible")) {
              jQuerycs(this).next().slideDown();
              jQuerycs(this).addClass("active");
            }
          });
          jQuerycs('body').on('click', '.csapps-add-to-cart-btn', function (e) {
            e.preventDefault();
            var btn = jQuerycs(this), data = [];
            btn.attr('disabled', 'disabled').addClass('loading');
            btn.closest('.csapps-bunlde-tiers').find('select[name="csapps-bundle-name-id"]').each(function (inx, grid) {
              var items = {};
              var prop = {};
              items.id = jQuerycs(grid).val();
              items.quantity = jQuerycs(grid).attr('data-qty');
              prop['_cs_bundle_id'] = btn.closest('.csapps-bunlde-tiers').attr('data-bundle_id');
              items.properties = prop;
              data.push(items);
            });
            jQuerycs.post('/cart/add.js?csapp=aiod', {
              items: data
            }, function (c) {
              if (typeof aiod_bundle_addtocart_success !== "undefined") {
                aiod_bundle_addtocart_success();
                btn.removeAttr('disabled', 'disabled').removeClass('loading');
              } else {
                window.location = '/cart';
              }
            }, 'JSON').fail(function (response) {
              alert('Any item of bundle is soldout. So, you can not buy this bundle.');
              btn.removeAttr('disabled', 'disabled').removeClass('loading');
            });
          });
        }
        clickappbundle(jQuerycs);
        window.csappsShowCartDiscounts = function (discounts, discount_type, v_s) {
          window.csapps.discounts = discounts;
          jQuerycs(".csapps-cart-original-total").css("text-decoration", "none").addClass('discount-price');
          jQuerycs('.csapp-discount-list, .csapps-cart-total').remove();
          var volume_bar = (typeof v_s.required_quantity_msg !== 'undefined' && v_s.required_quantity_msg != null && v_s.required_quantity_msg != '') ? v_s.required_quantity_msg : '';
          jQuerycs('[data-csapp_line_wrapper]').each(function (cslwi, cslw) {
            var csapp_cart_line_item = 0;
            jQuerycs(cslw).find('[data-csapp_line_index]').each(function (cslii, csli) {
              if (jQuerycs(csli).find('[data-csapp_price]').length || jQuerycs(csli).find('[data-csapp_line_price]').length || jQuerycs(csli).find('[data-csapp_discount_summery]').length || jQuerycs(csli).find('[data-aiod-volume-discount-line_item-bar]').length) {
                jQuerycs(csli).attr('data-csapp_line_index', csapp_cart_line_item);
                csapp_cart_line_item++;
              }
            });
          });
          if (volume_bar != '') {
            var offer_text = v_s.offer_text != null ? v_s.offer_text : '',
                get_a_text = v_s.get_a_text != null ? v_s.get_a_text : '';
            jQuerycs(discounts.items).each(function (i, v) {
              jQuerycs('[data-csapp_line_wrapper]').each(function (iw, dw) {
                var cs_line = jQuerycs(dw).find('[data-csapp_line_index="' + i + '"] [data-aiod-volume-discount-line_item-bar] .cs_volume_msg');
                if (typeof v.cs_volume_eligible !== 'undefined' && v.cs_volume_eligible != null) {
                  var discount_type = v.cs_volume_eligible.discount_type,
                      price = v.cs_volume_eligible.discount_value,
                      discount = (discount_type == 2) ? csapps.formatMoney(price * 100, wmf) + " " + offer_text : (discount_type == 1) ? get_a_text + " " + "<span class='money'>" + csapps.formatMoney(price * 100, wmf) + "</span>" : price + "% " + offer_text,
                      vlb = (volume_bar.indexOf('{{ quantity }}') > -1) ? volume_bar.replace("{% raw %}{{quantity}}{% endraw %}", v.cs_volume_eligible.required_quantity) : volume_bar,
                                                vlb = (vlb.indexOf('{{ discount }}') > -1) ? vlb.replace("{% raw %}{{discount}}{% endraw %}", discount) : vlb;
                                                (cs_line.length) ? cs_line.find('.cs_vol_txt').html(vlb) : jQuerycs(dw).find('[data-csapp_line_index="' + i + '"] [data-aiod-volume-discount-line_item-bar]').append('<div class="cs_volume_msg top_msg_main csapp_put_left" style="display: none;"><div class="cs_volume_msg_wrpr top_msg_wrpr"><div class="cs_volume_msg_close cs_close top_msg_close">' + close_svg + '</div><p class="cs_vol_txt">' + vlb + '</p></div></div>');
                             } else {
                             cs_line.remove();
                }
              });
            });
          }
          if (jQuerycs('.cs_volume_msg').length) {
            setTimeout(function () {
              jQuerycs('.cs_volume_msg').slideDown();
            }, 500);
          }
          if (discounts.total_discount > 0) {
            jQuerycs(".csapps-cart-original-total").html("<span class='money'>" + csapps.formatMoney(discounts.original_total_price, wmf) + "</span>").css("text-decoration", "line-through");
            jQuerycs("<span class='csapps-cart-total'><span class='money'>" + csapps.formatMoney(discounts.items_subtotal_price, wmf) + "</span></span>").insertAfter('.csapps-cart-original-total');
            if (typeof discounts.cart_level_discount_applications !== 'undefined' && discounts.cart_level_discount_applications.length) {
              jQuerycs('.csapp-discount-list').remove();
              jQuerycs('<div class="csapp-discount-list"></div>').insertAfter('.csapps-cart-total');
              jQuerycs(discounts.cart_level_discount_applications).each(function (i, v) {
                if (v.title.indexOf('cat_') == -1) {
                  jQuerycs('.csapp-discount-list').append('<div class="discount-label-conatiner"><div class="discount"><div class="dis-name"><span class="dis-svg"><svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-saletag"><path d="M10 3a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-3H7a1 1 0 0 0-.71.29l-6 6a1 1 0 0 0 0 1.42l4 4a1 1 0 0 0 1.42 0c.19-.2 5.8-5.81 6-6A1 1 0 0 0 12 5V2a2 2 0 0 0-2-2z" fill="#231F20"></path></svg></span><span data-cart-discount-title="" class="dis-text">' + v.title + '</span></div></div><div class="discount_price"><div class="csapp_money"> - <span class="money">' + csapps.formatMoney(v.total_allocated_amount, wmf) + '</span></div></div></div>');
                }
              });
            }
            if (discounts.items.length && discount_type == 'line_items') {
              var a_b_l_d = [], got_items = [];
              jQuerycs(discounts.items).each(function (i, v) {
                if (typeof v.line_level_discount_allocations !== 'undefined' && v.line_level_discount_allocations.length) {
                  if (jQuerycs('[data-csapp_line_wrapper]').length) {
                    jQuerycs('[data-csapp_line_wrapper]').each(function (iw, dw) {
                      var c_r = jQuerycs(dw).find('[data-csapp_line_index="' + i + '"]'),
                          c_r_p = jQuerycs(dw).find('[data-csapp_line_index="' + i + '"] [data-csapp_price]'),
                          c_r_l_p = jQuerycs(dw).find('[data-csapp_line_index="' + i + '"] [data-csapp_line_price]'),
                          c_r_s = jQuerycs(dw).find('[data-csapp_line_index="' + i + '"] [data-csapp_discount_summery]');
                      if (c_r.length && (c_r_p.length || c_r_l_p.length || c_r_s.length)) {
                        (c_r_p.length) ? c_r_p.html('<div class="csapp-price"><del class="money">' + csapps.formatMoney(v.original_price, wmf) + '</del><span class="money cs_final_price">' + csapps.formatMoney(v.final_price, wmf) + '</span></div>') : '';
                        (c_r_l_p.length) ? c_r_l_p.html('<div class="csapp-line-price"><del class="money">' + csapps.formatMoney(v.original_line_price, wmf) + '</del><span class="money cs_final_price">' + csapps.formatMoney(v.final_line_price, wmf) + '</span></div>') : '';
                        if (c_r_s.length) {
                          jQuerycs(v.line_level_discount_allocations).each(function (di, dv) {
                            c_r_s.append('<div class="discount-label-conatiner"><div class="discount"><div class="dis-name"><span class="dis-svg"><svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-saletag"><path d="M10 3a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-3H7a1 1 0 0 0-.71.29l-6 6a1 1 0 0 0 0 1.42l4 4a1 1 0 0 0 1.42 0c.19-.2 5.8-5.81 6-6A1 1 0 0 0 12 5V2a2 2 0 0 0-2-2z" fill="#231F20"></path></svg></span><span data-cart-discount-title="" class="dis-text">' + dv.discount_application.title + '</span></div></div><div class="discount_price"><div class="csapp_money"><span class="money" data-wg-notranslate="manual"> (-' + csapps.formatMoney((dv.discount_application.value * 100), wmf) + ')</span></div></div></div>');
                          });
                        }
                        got_items.push(i);
                      } else {
                        a_b_l_d[i] = '<div class="discount-label-conatiner"><div class="discount"><div class="dis-name"><span class="dis-svg"><svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-saletag"><path d="M10 3a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-3H7a1 1 0 0 0-.71.29l-6 6a1 1 0 0 0 0 1.42l4 4a1 1 0 0 0 1.42 0c.19-.2 5.8-5.81 6-6A1 1 0 0 0 12 5V2a2 2 0 0 0-2-2z" fill="#231F20"></path></svg></span><span data-cart-discount-title="" class="dis-text">' + v.title + '</span></div></div><div class="discount_price"><div class="csapp_money"> - <span class="money">' + csapps.formatMoney(v.total_discount, wmf) + '</span></div></div></div>';
                      }
                    });
                  } else {
                    a_b_l_d[i] = '<div class="discount-label-conatiner"><div class="discount"><div class="dis-name"><span class="dis-svg"><svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-saletag"><path d="M10 3a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-3H7a1 1 0 0 0-.71.29l-6 6a1 1 0 0 0 0 1.42l4 4a1 1 0 0 0 1.42 0c.19-.2 5.8-5.81 6-6A1 1 0 0 0 12 5V2a2 2 0 0 0-2-2z" fill="#231F20"></path></svg></span><span data-cart-discount-title="" class="dis-text">' + v.title + '</span></div></div><div class="discount_price"><div class="csapp_money"> - <span class="money">' + csapps.formatMoney(v.total_discount, wmf) + '</span></div></div></div>';
                  }
                }
              });
              jQuerycs(got_items).each(function (gi, gv) {
                if (typeof a_b_l_d[gv] !== "undefined") {
                  a_b_l_d.splice(gv, 1);
                }
              });
              (a_b_l_d.length && !jQuerycs('.csapp-discount-list').length) ? jQuerycs('<div class="csapp-discount-list"></div>').insertAfter('.csapps-cart-total') : '';
              (a_b_l_d.length) ? jQuerycs('.csapp-discount-list').prepend(a_b_l_d.join(' ')) : '';
            }
          } else {
            jQuerycs(".csapps-cart-original-total").html("<span class='money'>" + csapps.formatMoney(discounts.original_total_price, wmf) + "</span>").removeClass('discount-price');
          }
          if (typeof cs_discount_applied_Cart !== "undefined") {
            cs_discount_applied_Cart();
          }
        }
        window.csappsCheckout = function () {
          var pv_draft_url = window.csapps.vd_url + "/api/cart-request" + is_test + "?csapp=aiod",
              storage_code = localStorage.getItem('discount_code'), cid = window.csapps.customer,
              json_data = window.csapps.cart_collections, shopify_discount = '';
          if (jQuerycs('input[name="discount"]').length) {
            shopify_discount = jQuerycs('input[name="discount"]').val();
          }
          window.csapps.checkout_request_ajax = jQuerycs.ajax({
            url: '/cart.js?csapp=aiod',
            timeout: other_call_timeout,
            dataType: 'json',
            type: 'POST',
            beforeSend: function () {
              if (window.csapps.checkout_request_ajax != 'ToCancelPrevReq' && window.csapps.checkout_request_ajax.readyState < 4) {
                window.csapps.checkout_request_ajax.abort();
              }
            },
            success: function (cart) {
              var data = {
                cid: cid,
                cdata: cart,
                cart_collections: json_data,
                shop: window.csapps.store_id,
                discount_code: shopify_discount
              };
              jQuerycs.ajax({
                url: pv_draft_url,
                timeout: cart_call_timeout,
                data: data,
                dataType: 'json',
                type: 'POST',
                crossDomain: true,
                success: function (result) {
                  if (result.cdata.success == true && result.cdata.code) {
                    window.location.href = "/checkout?discount=" + result.cdata.code;
                  } else if (result.cdata.success == true && result.cdata.url) {
                    window.location.href = result.cdata.url;
                  } else {
                    window.location.href = "/checkout"
                  }
                  localStorage.removeItem('discount_code');
                  jQuerycs(checkout_selectors).attr('disabled', false);
                },
                error: function (jqXHR, textStatus) {
                  window.location.href = "/checkout"
                  jQuerycs(checkout_selectors).attr('disabled', false);
                }
              });
            },
            error: function (jqXHR, textStatus) {
              console.log('Something went wrong. Please try again!');
              jQuerycs(checkout_selectors).attr('disabled', false);
            }
          });
          csapps.set_local_data('csbogo', 0);
          csapps.set_local_data('csfree', 0);
        }
        if (window.csapps.page_type == "product") {
          window.eligible_offer = function (data, setting) {
            var offer = data, level = offer.discount_quantities,
                offer_layout_code = offer.display_offer_view_type_code, display = setting, level_html,
                required_min_val = (typeof offer.min_amount !== 'undefined' && offer.min_amount != null) ? offer.min_amount : 0;
            level_html = get_offer_table_layout(offer_layout_code, level, display, data.priority, required_min_val);
            window.csapps.Data_volume[data.id] = level_html;
            return level_html;
          }
          window.get_offer_table_layout = function (offer_layout_code, level, display, priority, required_min_val) {
            var discount_type, discount, price, quantity,
                volume_setting = display['language'].setting.volume_settings,
                table_setting = display['table-design'].setting,
                levels_html = '',
                minimum_quantity = volume_setting.minimum_quantity != null ? volume_setting.minimum_quantity : '',
                maximum_quantity = volume_setting.maximum_quantity != null ? volume_setting.maximum_quantity : '',
                discount_setting = volume_setting.discount != null ? volume_setting.discount : '',
                maximum_quantity_after = volume_setting.maximum_quantity_after != null ? volume_setting.maximum_quantity_after : '',
                minimum_quantity_before = volume_setting.minimum_quantity_before != null ? volume_setting.minimum_quantity_before : '',
                offer_text = volume_setting.offer_text != null ? volume_setting.offer_text : '',
                get_a_text = volume_setting.get_a_text != null ? volume_setting.get_a_text : '',
                buy_more_save_more = volume_setting.buy_more_save_more != null ? volume_setting.buy_more_save_more : '',
                rpam = (typeof volume_setting.required_purchased_amount_msg !== 'undefined' && volume_setting.required_purchased_amount_msg != null) ? volume_setting.required_purchased_amount_msg : '';
            if (offer_layout_code == 'Detail Grid' || offer_layout_code == 'Basic' || offer_layout_code == 'Grid Range Alternate') {
              if (buy_more_save_more != '') {
                levels_html += "<div class='offer-wrpper' data-priority='" + priority + "'><h4 class='heading_table'>" + buy_more_save_more + "</h4>"
              }
              levels_html += "<div class='csapps-volume-discount-tiers'><table class='csapps-table table'>"
              if (minimum_quantity != '' || discount_setting != '') {
                levels_html += "<thead><tr><th>" + minimum_quantity + "</th><th>" + discount_setting + "</th></tr></thead>"
              }
              levels_html += "<tbody>"
            } else {
              if (buy_more_save_more != '') {
                levels_html += "<h4 class='heading_table'>" + buy_more_save_more + "</h4>"
              }
              levels_html += "<div class='csapps-volume-discount-tiers'><table class='csapps-table table'>"
              if (minimum_quantity != '' || maximum_quantity != '' || discount_setting != '') {
                levels_html += "<thead><tr><th>" + minimum_quantity + "</th><th>" + maximum_quantity + "</th><th>" + discount_setting + "</th></tr></thead>"
              }
              levels_html += "<tbody>"
            }
            jQuerycs.each(level, function (key, value) {
              discount_type = value.discount_type;
              price = value.discount_value
              quantity = value.quantity;
              discount = (discount_type == 2) ? csapps.formatMoney(price * 100, wmf) + " " + offer_text : (discount_type == 1) ? get_a_text + " " + "<span class='money'>" + csapps.formatMoney(price * 100, wmf) + "</span>" : price + "% " + offer_text
              if (offer_layout_code == 'Detail Grid') {
                levels_html += "<tr><td>" + minimum_quantity_before + ' ' + quantity + ' ' + maximum_quantity_after + "</td><td>" + discount + "</td></tr>"
              } else if (offer_layout_code == 'Basic') {
                levels_html += "<tr><td>" + quantity + " " + maximum_quantity_after + " </td><td><span class='csapps-price'>" + discount + "</span></td></tr>"
              } else if (offer_layout_code == 'Grid Range') {
                var second_qty = (quantity) ? (level[key + 1]) ? level[key + 1].quantity - 1 : maximum_quantity_after : ''
                levels_html += "<tr><td>" + quantity + "</td><td>" + second_qty + "</td><td><span class='csapps-price'>" + discount + "</span></td></tr>"
              } else if (offer_layout_code == 'Grid Range Alternate') {
                if (value == level[key - 1]) {
                  levels_html += "<tr><td>" + quantity + " + " + "</td><td><span class='csapps-price'>" + discount + "</span></td></tr>"
                } else {
                  var second_qty = (quantity) ? (level[key + 1]) ? level[key + 1].quantity - 1 : maximum_quantity_after : ''
                  levels_html += "<tr><td>" + quantity + "-" + second_qty + "</td><td><span class='csapps-price'>" + discount + "</span></td></tr>"
                }
              }
            });
            rpam = (rpam != '') ? (((required_min_val > 1) || (required_min_val >= 1 && rpam != 'Spend {{ amount }} to get offer.')) ? ((rpam.indexOf('{{ amount }}') > -1) ? "<p class='volume_required_msg'>" + rpam.replace("{% raw %}{{amount}}{% endraw %}", csapps.formatMoney((required_min_val * 100), wmf)) + "</p>" : "<p class='volume_required_msg'>" + rpam + "</p>") : '') : '';
                                                               levels_html += "</tbody></table></div>" + rpam + "</div>"
                                                               return levels_html
                                                               }
                                                               }
                                                               window.remove_bogo_msg = function () {
                                    if (jQuerycs(".cs_bogo_msg").length > 0) {
            jQuerycs('.cs_bogo_msg').slideUp();
            setTimeout(function () {
            jQuerycs('.cs_bogo_msg').remove();
          }, 500);
          }
          }
            window.remove_general_msg = function () {
            if (jQuerycs(".cs_general_msg").length > 0) {
            jQuerycs('.cs_general_msg').slideUp();
            setTimeout(function () {
            jQuerycs('.cs_general_msg').remove();
          }, 500);
          }
          }
            window.remove_free_gift_msg = function () {
            if (jQuerycs(".cs_free_p_msg").length > 0) {
            jQuerycs('.cs_free_p_msg').slideUp();
            setTimeout(function () {
            jQuerycs('.cs_free_p_msg').remove();
          }, 500);
          }
          }
            window.remove_wholesale_msg = function () {
            if (jQuerycs(".cs_wholesale_msg").length > 0) {
            jQuerycs('.cs_wholesale_msg').slideUp();
            setTimeout(function () {
            jQuerycs('.cs_wholesale_msg').remove();
          }, 500);
          }
          }
            window.remove_free_gift_popup = function () {
            jQuerycs('.free_gift_popup').removeClass('cs_show').html('');
            (jQuerycs('.bogo_popup:not(.cs_show) .cs_bogo_popup_content').length) ? jQuerycs('.bogo_popup').addClass('cs_show') : '';
          }
          window.remove_bogo_popup = function () {
            jQuerycs('.bogo_popup').removeClass('cs_show').html('');
          }
          window.count_bundle_wise_price = function (bundle_wrapper) {
            var sold_out = [], total_price = 0,
                discount_type = Number(jQuerycs(bundle_wrapper).find('.csapps-bunlde-wrapper').attr('data-discount_type')),
                Discount_value = Number(jQuerycs(bundle_wrapper).find('.csapps-bunlde-wrapper').attr('data-discount_value'));
            jQuerycs(bundle_wrapper).find('.csapps-bundle-thumb').each(function () {
              var thumbnail = jQuerycs(this).find('select[name="csapps-bundle-name-id"] option:selected'),
                  price = Number(Number(thumbnail.attr('data-price')).toFixed(2)),
                  available = thumbnail.attr('data-available'), del_p_grid = thumbnail.attr('data-compare-price');
              if (available == 'false' || thumbnail.val() == '') {
                var variant_title = thumbnail.attr('data-title').toLowerCase(),
                    product_title = thumbnail.attr('data-ptitle').toLowerCase();
                variant_title == 'default title' ? sold_out.push(product_title) : sold_out.push(product_title + ' (' + variant_title + ')');
              }
              total_price = total_price + price;
              var p_html = ''
              p_html += "<span class='money'>" + csapps.formatMoney(price, wmf) + "</span>"
              if (del_p_grid != '' && del_p_grid != null && typeof del_p_grid !== 'undefined') {
                del_p_grid = Number(Number(del_p_grid).toFixed(2));
                if (del_p_grid > price) {
                  p_html += '<del><span class=money>' + csapps.formatMoney(del_p_grid, wmf) + '</span></del>'
                }
              }
              jQuerycs(this).find('.csapps-price').html(p_html)
            });
            var full_price = '',
                discount = ((discount_type == 1) ? Discount_value * 100 : ((total_price * Discount_value) / 100)),
                new_price = (total_price >= discount) ? (total_price - discount) : 0;
            full_price += window.csapps.bundle_total_price_text
            if (total_price > new_price) {
              full_price += '<del><span class="money">' + csapps.formatMoney(total_price, wmf) + '</span></del>'
            }
            full_price += '<span class="csbundle-total-price money">' + csapps.formatMoney(new_price, wmf) + '</span>'
            if (total_price > new_price) {
              var save_p = total_price - new_price;
              full_price += '<span class="csapp_bundle_saveprice"> ' + window.csapps.bundle_save_text + ' <span class="csbundle-save-price money">' + csapps.formatMoney(save_p, wmf) + '</span></span>'
            }
            jQuerycs(bundle_wrapper).find('.csapps-total_price').html(full_price);
            var csapp_error_html = '', atcb = jQuerycs(bundle_wrapper).find('.csapps-add-to-cart-btn');
            if (sold_out.length > 0) {
              csapp_error_html = window.csapps.bundle_not_available.replace("{% raw %}{{title}}{% endraw %}", sold_out.join(' & '))
                                                                            atcb.addClass('disabled');
              atcb.attr('disabled', 'disabled');
            } else {
              if (jQuerycs(bundle_wrapper).attr('data-hidden_p') != '' || jQuerycs(bundle_wrapper).attr('data-hidden_p') != null) {
                if (Number(jQuerycs(bundle_wrapper).attr('data-hidden_p')) == 0) {
                  atcb.removeClass('disabled');
                  atcb.removeAttr('disabled');
                } else {
                  atcb.addClass('disabled');
                  atcb.attr('disabled', 'disabled');
                }
              } else {
                atcb.removeClass('disabled');
                atcb.removeAttr('disabled');
              }
            }
            jQuerycs(bundle_wrapper).find('.csapps-error').html((sold_out.length > 0) ? '<p>' + csapp_error_html + '</p>' : '');
          }
          window.change_grid_price = function (selbox, method) {
            var op_selected = jQuerycs(selbox).find('option:selected'),
                close_thumb = op_selected.closest('.is_grid_thumb'),
                price = Number(Number(op_selected.attr('data-price')).toFixed(2)),
                available = op_selected.attr('data-available'), del_p_grid = op_selected.attr('data-compare-price'),
                price_content = '', atcb = close_thumb.find('.grid_atc_btn');
            price_content += '<span class="money" data-wg-notranslate="manual">' + csapps.formatMoney(price, wmf) + '</span>';
            price_content += (del_p_grid > price) ? '<del><span class="money" data-wg-notranslate="manual">' + csapps.formatMoney(del_p_grid, wmf) + '</span></del>' : '';
            close_thumb.find('.csapps-price').html(price_content);
            if (available == 'true') {
              atcb.removeClass('disabled');
              atcb.removeAttr('disabled');
              atcb.text((method == 'bogo') ? window.csapps.bogo_atc : window.csapps.free_g_atc);
            } else {
              atcb.addClass('disabled');
              atcb.attr('disabled', 'disabled');
              atcb.text((method == 'bogo') ? window.csapps.bogo_soldout : window.csapps.free_g_soldout);
            }
          }
          window.get_variant_title_option = function (poptions, variant) {
            var vt_html = '<ul>';
            jQuerycs(poptions).each(function (oi, ov) {
              vt_html += '<li>' + ov.name + ': ' + variant.options[oi] + '</li>';
            });
            return vt_html += '</ul>';
          }
          window.data_bundle_product = function (product,P_V,offer_type,bundle_langauge){
            var select_hide = '', has_multiple_varinat = false;
            select_box = ''
            select_box += '<select name="csapps-bundle-name-id" data-qty="' + P_V.quantity + '" ' + select_hide + ' style="display: none !important;" onchange="count_bundle_wise_price(this.closest(`.csapps-bunlde-tiers`));">'
            var selected = '', cnt_sel = 0, csapp_variant_title = '', current_variant_option = [], all_option_list_one = [], all_option_list_two = [], all_option_list_three = [];
            jQuerycs(product.variants).each(function (V_I, V_V) {
              var available = V_V.available;
              if(offer_type == 3){
                has_multiple_varinat = (P_V.default_variant_ids.indexOf(',') > -1);
                if (has_multiple_varinat) {
                  var variant_ids = P_V.default_variant_ids.split(',');
                  variant_ids = variant_ids.map(Number);
                  if(variant_ids.indexOf(V_V.id) > -1){
                    if (product.available) {
                      if (cnt_sel == 0) {
                        cnt_sel++;
                        selected = 'selected="selected"';
                        current_variant_option = V_V.options;
                      } else {
                        selected = '';
                      }
                    } else {
                      if (V_I == 0) {
                        selected = 'selected="selected"';
                        current_variant_option = V_V.options;
                      } else {
                        selected = '';
                      }
                    }
                  }else{
                    return;
                  }
                } else {
                  if (P_V.default_variant_ids != V_V.id) {
                    return;
                  } else {
                    selected = 'selected="selected"';
                    if (V_V.title.toLowerCase() != 'default title') {
                      var v_title = get_variant_title_option(product.options, V_V);
                      csapp_variant_title = '<div class="csapp-variant-title">' + v_title + '</div>';
                    }
                  }
                }
              }else{
                if(product.variants.length > 1){
                  if (product.available) {
                    if (cnt_sel == 0) {
                      cnt_sel++;
                      selected = 'selected="selected"';
                      current_variant_option = V_V.options;
                    } else {
                      selected = '';
                    }
                  } else {
                    if (V_I == 0) {
                      selected = 'selected="selected"';
                      current_variant_option = V_V.options;
                    } else {
                      selected = '';
                    }
                  }
                }else{
                  selected = 'selected="selected"';
                  if (V_V.title.toLowerCase() != 'default title') {
                    var v_title = get_variant_title_option(product.options, V_V);
                    csapp_variant_title = '<div class="csapp-variant-title">' + v_title + '</div>';
                  }
                }
              }
              var price = (V_V.price) * P_V.quantity;
              var cmp_price = null;
              if (V_V.compare_at_price != '' && V_V.compare_at_price != null && typeof V_V.compare_at_price !== 'undefined') {
                cmp_price = (V_V.compare_at_price) * P_V.quantity;
              }
              $(V_V.options).each(function(v_b_o,v_b_v){
                if(v_b_o == 0){
                  (all_option_list_one.indexOf(v_b_v) == -1) ? all_option_list_one.push(v_b_v) : all_option_list_one;
                }
                if(v_b_o == 1){
                  (all_option_list_two.indexOf(v_b_v) == -1) ? all_option_list_two.push(v_b_v) : all_option_list_two;
                }
                if(v_b_o == 2){
                  (all_option_list_three.indexOf(v_b_v) == -1) ? all_option_list_three.push(v_b_v) : all_option_list_three;
                }
              });
              select_box += '<option ' + selected + ' value="' + V_V.id + '" data-title="' + V_V.title + '" data-ptitle="' + product.title + '" data-compare-price="' + cmp_price + '" data-price="' + price + '" data-available="' + available + '">' + V_V.title + '</option>'
            });
            select_box += '</select>'
            if ((offer_type == 3 && has_multiple_varinat) || (offer_type != 3 && product.variants.length > 1)) {
              jQuerycs(product.options).each(function (index, op_val_full) {
                select_box += '<select class="csapp-select-option-selector cs_single_op_selector" data-csapp-option-index="' + index + '">'
                var selected_wrpr = ''
                jQuerycs(op_val_full.values).each(function (csi, op_val) {
                  if((index == 0 && all_option_list_one.indexOf(op_val) == -1) || (index == 1 && all_option_list_two.indexOf(op_val) == -1) || (index == 2 && all_option_list_three.indexOf(op_val) == -1)){
                    return;
                  }
                  if (current_variant_option.length) {
                    if (current_variant_option[index] == op_val) {
                      selected_wrpr = 'selected="selected"'
                    } else {
                      selected_wrpr = ''
                    }
                  } else {
                    if (csi == 0) {
                      selected_wrpr = 'selected="selected"'
                    } else {
                      selected_wrpr = ''
                    }
                  }
                  select_box += '<option ' + selected_wrpr + ' value="' + op_val + '">' + op_val + '</option>';
                });
                select_box += '</select>'
              });
            }
            var img_src = imgURL('https://cdn.shopify.com/s/files/1/0438/3712/8857/files/csapp-placeholder-image.png?v=1618902140', '300x'),
                img_alt = product.title;
            if (product.media) {
              img_src = imgURL(product.media[0].preview_image.src, '300x');
              img_alt = product.media[0].alt;
            }
            var qty_txt = (bundle_langauge.quantity != null) ? bundle_langauge.quantity + ' : ' : '';                        
            return '<div class="csapps-bundle-thumb"><div class="csapp-thumb-inner"><a href="' + product.url + '"><img src="' + img_src + '" alt="' + img_alt + '"></a><div class="csapps-p-detail"><div class="csapps-p-title"><a href="' + product.url + '">' + product.title + '</a></div>' + csapp_variant_title + select_box + '<div class="csapps-price"></div><div class="csapps-price-qty">' + qty_txt + P_V.quantity + '</div></div></div></div>';
          }
          window.add_bundle = function (value, in_append, bundle_langauge, data_length, index, next_page_url, load_more_txt) {
            var total_price_text = bundle_langauge.total_price, save_text = bundle_langauge.save, not_visible_p = 0,
                bundle_id = value.id, all_sold_out = [], offer_type = value.offer_type, bundle_html = '';
            bundle_html += '<div class="csapps-bunlde-tiers" data-bundle_id="' + bundle_id + '"><h3 class="csapp_bundle_title">' + value.widget_title + '</h3>';
            if (value.description != '' || value.description != null) {
              bundle_html += '<div class="csapps-bunlde_desc">' + value.description + '</div>';
            }
            bundle_html += '<div class="csapps-bunlde-wrapper desk_' + value.desktop_grid_per_row_class + ' mob_' + value.mobile_grid_per_row_class + '" data-discount_type="' + value.discount_type + '" data-discount_value="' + value.discount_value + '">';
            var main_price = 0, discount_price = 0;
            jQuerycs(value.products).each(function (P_I, P_V) {
              var P_URL = '/products/' + P_V.handle + '.js?csapp=aiod';
              if (window.csapps.all_products[P_V.handle] == undefined) {
                jQuerycs.ajax({
                  url: P_URL,
                  timeout: other_call_timeout,
                  dataType: 'json',
                  async: false,
                  success: function (product) {
                    window.csapps.all_products[P_V.handle] = product;
                    bundle_html += data_bundle_product(product, P_V, offer_type, bundle_langauge);
                  },
                  error: function (jqXHR, textStatus) {
                    not_visible_p++;
                  }
                });
              } else {
                var product = window.csapps.all_products[P_V.handle];
                bundle_html += data_bundle_product(product, P_V, offer_type, bundle_langauge);
              }
              if (not_visible_p > 0) {
                return false;
              }
            });
            jQuerycs(".loader").remove();
            if (not_visible_p == 0) {
              bundle_html += '</div><div class="csapp_container_bundle"><div class="csapps-error"></div><div class="csapp_total_bundle"><div class="csapps-total_price"></div><div class="csapps-btn_wrapper"><button type="button" class="csapp_btn csapps-add-to-cart-btn">' + value.button_text + '</button></div></div></div></div>'
              jQuerycs(in_append).append(bundle_html);
              jQuerycs('.csapps-bunlde-tiers[data-bundle_id="' + bundle_id + '"]').attr('data-hidden_p', not_visible_p);
              count_bundle_wise_price(jQuerycs(in_append).find('.csapps-bunlde-tiers[data-bundle_id="' + bundle_id + '"]'));
            }
            if (data_length == index && next_page_url != '' && next_page_url != null && typeof next_page_url !== 'undefined') {
              jQuerycs(in_append).append('<div class="csapp_load_more"><button class="csapp_btn load_more_bundle" data-next_url="' + next_page_url + '">' + load_more_txt + '</button></div>');
            }
          }
          window.caapp_style = function (settings) {
            if (window.csapps.bundle_style_cnt == 0) {
              window.csapps.bundle_style_cnt = 1;
              window.csapps.bundle_total_price_text = (settings.language.setting.bundle_settings.total_price != null) ? '<b class="cs-price-heading">' + settings.language.setting.bundle_settings.total_price + ':</b> ' : '';
              window.csapps.bundle_save_text = (settings.language.setting.bundle_settings.save != null) ? '<b class="cs-save-heading">' + settings.language.setting.bundle_settings.save + '</b>' : '';
              window.csapps.bundle_not_available = (settings.language.setting.bundle_settings.not_available != null) ? ((settings.language.setting.bundle_settings.not_available.indexOf('{{ title }}') == -1) ? '{{ title }} ' + settings.language.setting.bundle_settings.not_available : settings.language.setting.bundle_settings.not_available) : '{{ title }} is not available';
                    var general_part = settings.general.setting, button_box = general_part.button_box,
                        button_text = general_part.button_text, title = general_part.title,
                        product_name = general_part.product_name, price = general_part.price,
                        total_amount = general_part.total_amount, product_box = general_part.product_box,
                        plus_sign = general_part.plus_sign, popup_close_icon = general_part.popup_close_icon,
                        cart_page_color = general_part.cart_page;
                    var csapp_bundle_style = '.g_b_w .csapp_btn, .csapps-btn_wrapper .csapp_btn, .csapp_load_more .csapp_btn{ background-color: ' + button_box.background_color + ';';
                    csapp_bundle_style += 'border:' + button_box.border_width + 'px ' + button_box.border_type + ' ' + button_box.border_color + ';';
                    csapp_bundle_style += 'color: ' + button_text.font_color + ';';
                    csapp_bundle_style += 'font-size: ' + button_text.font_size + 'px;';
                    csapp_bundle_style += 'font-style: ' + button_text.font_style + ';}';
                    csapp_bundle_style += '.csapps-bunlde-tiers .csapp_bundle_title, .cs_p_c_m .csapp_popup_wrpr h4{ color: ' + title.font_color + '; fill: ' + title.font_color + '; border-color: ' + title.font_color + ';';
                    csapp_bundle_style += 'font-size: ' + title.font_size + 'px;';
                    csapp_bundle_style += 'font-style: ' + title.font_style + ';}';
                    csapp_bundle_style += ' .cs_p_c_m .csapp_popup_wrpr h4 svg, .cs_p_c_m .csapp_popup_wrpr h4 path, .cs_p_c_m .csapp_popup_wrpr .cs_offer_content{ fill: ' + title.font_color + '; border-color: ' + title.font_color + '; }';
                    csapp_bundle_style += '.cs_p_c_m .csapps-p-detail .csapps-p-title a, .csapps-bunlde-tiers .csapps-p-detail .csapps-p-title a, .csapps-bunlde-tiers .csapp-variant-title, .csapps-bunlde-tiers .csapps-price-qty { color: ' + product_name.font_color + ';';
                    csapp_bundle_style += 'font-size: ' + product_name.font_size + 'px;';
                    csapp_bundle_style += 'font-style: ' + product_name.font_style + ';}';
                    csapp_bundle_style += 'select.cs_single_op_selector{ font-size: ' + product_name.font_size + 'px;}';
                    csapp_bundle_style += '.csapps-bunlde-tiers .csapps-price, .cs_p_c_m .cs_offer_content_wp .csapps-price { color: ' + price.font_color + ';';
                    csapp_bundle_style += 'font-size: ' + price.font_size + 'px;';
                    csapp_bundle_style += 'font-style: ' + price.font_style + ';}';
                    csapp_bundle_style += '.csapps-bunlde-tiers .csapps-total_price { color: ' + total_amount.font_color + ';';
                    csapp_bundle_style += 'font-size: ' + total_amount.font_size + 'px;';
                    csapp_bundle_style += 'font-style: ' + total_amount.font_style + ';}';
                    csapp_bundle_style += '.csapps-bunlde-tiers .csapp-thumb-inner, .cs_p_c_m .is_grid_thumb .grid_inner { background-color: ' + product_box.background_color + ';';
                    csapp_bundle_style += 'border:' + product_box.border_width + 'px ' + product_box.border_type + ' ' + product_box.border_color + ';}';
                    csapp_bundle_style += '.csapps-bunlde-tiers .csapp-thumb-inner::after { color: ' + plus_sign.font_color + '; background-color: ' + plus_sign.background_color + ';';
                    csapp_bundle_style += 'font-size: ' + plus_sign.font_size + 'px;';
                    csapp_bundle_style += 'font-style: ' + plus_sign.font_style + ';}';
                    csapp_bundle_style += '.cs_popup .popup_close { background-color: ' + popup_close_icon.background_color + ';}';
                    csapp_bundle_style += '.cs_popup .popup_close svg, .cs_popup .popup_close path { fill: ' + popup_close_icon.close_icon_color + ';}';
                    csapp_bundle_style += '[data-csapp_line_wrapper] [data-csapp_price] .cs_final_price, [data-csapp_line_wrapper] [data-csapp_line_price] .cs_final_price, [data-csapp_line_wrapper] [data-csapp_discount_summery] .discount-label-conatiner, [data-csapp_line_wrapper] [data-csapp_discount_summery] .dis-svg svg, [data-csapp_line_wrapper] [data-csapp_discount_summery] .dis-svg svg path{ fill: ' + cart_page_color.line_item_text_color + '; color: ' + cart_page_color.line_item_text_color + ';}';
                    csapp_bundle_style += '.csapp-discount-list .discount-label-conatiner .dis-name svg, .csapp-discount-list .discount-label-conatiner .dis-name path, .csapp-discount-list .discount-label-conatiner .dis-name span[data-cart-discount-title], .csapp-discount-list .discount-label-conatiner .discount_price{ fill: ' + cart_page_color.cart_total_discount_text_color + '; color: ' + cart_page_color.cart_total_discount_text_color + ';}';
                    head = document.head || document.getElementsByTagName('head')[0];
                                                                                                                         style = document.createElement('style');
                                                                                                                        head.appendChild(style);
              style.type = 'text/css';
              if (style.styleSheet) {
              style.styleSheet.cssText = csapp_bundle_style;
            } else {
              style.appendChild(document.createTextNode(csapp_bundle_style));
            }
            }
            }
              window.eligible_bundle = function (result, in_append, is_all) {
              var bundle_langauge = result.settings.language.setting.bundle_settings,
                load_more_txt = (bundle_langauge.load_more != null) ? bundle_langauge.load_more : 'Load More',
                data_length = (result.data.length - 1);
              jQuerycs.each(result.data, function (i, value) {
                if (value.status_text == 'Active') {
                  if (is_all) {
                    jQuerycs('.loader').removeAttr('style');
                    setTimeout(function () {
                      add_bundle(value, in_append, bundle_langauge, data_length, i, result.next_page_url, load_more_txt);
                    }, 100);
                  } else {
                    jQuerycs(value.products).each(function (P_I, P_V) {
                      if (P_V.product_id == window.csapps.product_id) {
                        jQuerycs('.loader').removeAttr('style');
                        setTimeout(function () {
                          add_bundle(value, in_append, bundle_langauge, data_length, i, result.next_page_url, load_more_txt);
                        }, 100);
                      }
                    });
                  }
                }
              });
              jQuerycs(in_append).find('.csapp_load_more').remove();
            }
            window.check_bundle_possiblity = function (bundle_div) {
              var is_all = false, data = {}, offer_id = jQuerycs(bundle_div).attr('data-offer_id'),
                  product_id = jQuerycs(bundle_div).attr('data-product_id');
              if ((typeof offer_id !== 'undefined' && offer_id !== false && offer_id != '') && (typeof product_id !== 'undefined' && product_id !== false)) {
                if (product_id.trim().length > 0 && offer_id.trim().length) {
                  data = {
                    product_id: product_id,
                    offer_id: offer_id,
                    shop: window.csapps.store_id,
                    request_type: '0'
                  }
                }
              } else if (typeof offer_id !== 'undefined' && offer_id !== false) {
                is_all = (window.csapps.page_type != 'product') ? true : false;
                if (offer_id.trim().length > 0) {
                  data = {offer_id: offer_id, shop: window.csapps.store_id, request_type: '0'}
                }
              } else if (typeof product_id !== 'undefined' && product_id !== false) {
                if (product_id.trim().length > 0) {
                  data = {product_id: product_id, shop: window.csapps.store_id, request_type: '0'}
                }
              } else {
                data = {shop: window.csapps.store_id, request_type: '0'}
                is_all = (window.csapps.page_type != 'product') ? true : false;
              }
              return [data, is_all];
            }
            window.bundleTable = function (getUrl, data, in_append, is_all) {
              jQuerycs.ajax({
                url: getUrl,
                timeout: other_call_timeout,
                data: data,
                dataType: 'json',
                type: 'GET',
                beforeSend: function () {
                },
                success: function (result) {
                  if (result.data.length > 0) {
                    caapp_style(result.settings);
                    eligible_bundle(result, in_append, is_all);
                  }
                },
                error: function (jqXHR, textStatus) {
                  console.log('AIOD - Something went wrong. Please try again!');
                }
              });
            }
            window.top_bar_css_all = function (topbar_setting) {
              if (window.csapps.top_bar_css == 0) {
                window.csapps.top_bar_css = 1;
                jQuerycs('head').append('<style type="text/css">.top_msg_main .top_msg_wrpr{background-color: ' + topbar_setting.background_color + ';} .top_msg_main .top_msg_close svg{fill:' + topbar_setting.close_icon_color + ';} .top_msg_main .top_msg_wrpr p{color:' + topbar_setting.font_color + ';font-size:' + topbar_setting.font_size + 'px;font-style:' + topbar_setting.font_style + ';}</style>');
              }
            }
            window.bogo_top_msg = function (result, top_post) {
              var progress_ids = '', csdivn = '';
              top_bar_css_all(result.settings.general.setting.top_bar);
              if (top_post == 1) {
                progress_ids = result.bogo_popup.progress_ids;
              }
              var bogo_setting = result.settings.language.setting.bogo_settings, append_text = [],
                  cs_bogo = (top_post == 1) ? result.bogo_popup.data : result.data;
              jQuerycs(cs_bogo).each(function (b_i, bg_offer) {
                var offer_txt = '';
                if (top_post == 1 && progress_ids[bg_offer.id] !== 'undefined') {
                  offer_txt = (bg_offer.setting_type == 2 && typeof bg_offer.setting_json.progress_message !== 'undefined' && bg_offer.setting_json.progress_message != null && bg_offer.setting_json.progress_message != '') ? '<p>' + bg_offer.setting_json.progress_message + '</p>' : ((bg_offer.setting_type == 1 && typeof bogo_setting.progress_message !== 'undefined' && bogo_setting.progress_message != null && bogo_setting.progress_message != '') ? '<p>' + bogo_setting.progress_message + '</p>' : '');
                } else if (top_post == 0) {
                  offer_txt = (bg_offer.setting_type == 2 && typeof bg_offer.setting_json.initial_message !== 'undefined' && bg_offer.setting_json.initial_message != null && bg_offer.setting_json.initial_message != '') ? '<p>' + bg_offer.setting_json.initial_message + '</p>' : ((bg_offer.setting_type == 1 && typeof bogo_setting.initial_message !== 'undefined' && bogo_setting.initial_message != null && bogo_setting.initial_message != '') ? '<p>' + bogo_setting.initial_message + '</p>' : '');
                }
                (offer_txt != '') ? append_text.push(offer_txt) : '';
              });
              append_text = append_text.join('');
              if (append_text != '') {
                csdivn = '<div class="cs_bogo_msg_wrpr top_msg_wrpr"><div class="cs_bogo_msg_close cs_close top_msg_close">' + close_svg + '</div>' + append_text + '</div>';
                if (jQuerycs(".cs_bogo_msg").length == 0) {
                  csdivn = '<div class="cs_bogo_msg top_msg_main" style="display:none;"><div class="cs_bogo_msg_wrpr top_msg_wrpr"><div class="cs_bogo_msg_close cs_close top_msg_close">' + close_svg + '</div>' + append_text + '</div></div>';
                }
                (jQuerycs(".cs_bogo_msg").length == 0) ? ((jQuerycs(".aiod-bogo-discount-topbar").length == 0) ? jQuerycs('body').prepend(csdivn) : jQuerycs('.aiod-bogo-discount-topbar').prepend(csdivn)) : jQuerycs(".cs_bogo_msg").html(csdivn);
                if (jQuerycs(".cs_bogo_msg").length > 0 && !jQuerycs('.cs_bogo_msg').is(':visible')) {
                  setTimeout(function () {
                    jQuerycs('.cs_bogo_msg').slideDown();
                  }, 500);
                }
              }
            }
            window.wholesale_offer = function (ws_offer, offer_txt) {
              var get_amt = csapps.formatMoney(ws_offer.discount_quantities[0].cart_total * 100, wmf),
                  get_discount = (ws_offer.discount_type == 0) ? ws_offer.discount_value + '%' : csapps.formatMoney(ws_offer.discount_value * 100, wmf);
              window.csapps.Data_wholesale[ws_offer.id] = (offer_txt != '') ? (offer_txt = (offer_txt.indexOf('{{ offer }}') > -1) ? offer_txt.replace("{% raw %}{{offer}}{% endraw %}", ws_offer.title) : offer_txt, offer_txt = (offer_txt.indexOf('{{ amount }}') > -1) ? offer_txt.replace("{% raw %}{{amount}}{% endraw %}", get_amt) : offer_txt, offer_txt = (offer_txt.indexOf('{{ discount }}') > -1) ? offer_txt.replace("{% raw %}{{discount}}{% endraw %}", get_discount) : offer_txt) : '';
                                                                                                              return window.csapps.Data_wholesale[ws_offer.id];
                                                                                                              }
                                                                                                              window.wholesale_top_msg = function (result) {
                                                                                            top_bar_css_all(result.settings.general.setting.top_bar);
                                                                               var wholesale_settings = result.settings.language.setting.wholesale_settings, append_text = [],
                                                                               wholesale_widget = '',
                                                                               offer_txt = ((typeof wholesale_settings.minimum_quantity_message !== 'undefined' && wholesale_settings.minimum_quantity_message != null && wholesale_settings.minimum_quantity_message != '') ? '<p>' + wholesale_settings.minimum_quantity_message + '</p>' : '');
              jQuerycs(result.data).each(function (w_i, ws_offer) {
              var get_wholesale_variants_id = '';
              if (ws_offer.offer_type_text == 'Variant' && ws_offer.selection_type_text == 'Custom Selection') {
              window.csapps.wholesale_is_variant = 1;
              jQuerycs(ws_offer.products).each(function (i, pv) {
              if (window.csapps.product_id == pv.product_id) {
              get_wholesale_variants_id = pv.default_variant_ids;
              return false;
            }
            });
              if (get_wholesale_variants_id.indexOf(window.csapps.product.selected_variant) > -1) {
              if (window.csapps.Data_wholesale[ws_offer.id]) {
              wholesale_widget += window.csapps.Data_wholesale[ws_offer.id];
            } else {
              wholesale_widget += wholesale_offer(ws_offer, offer_txt);
            }
            }
            } else {
              if (window.csapps.Data_wholesale[ws_offer.id]) {
              wholesale_widget += window.csapps.Data_wholesale[ws_offer.id];
            } else {
              wholesale_widget += wholesale_offer(ws_offer, offer_txt);
            }
            }
            });
              if (wholesale_widget != '') {
              var bar_class = (window.csapps.page_type == "product") ? ' csapp_put_full' : '', csdivn = '';
              csdivn = '<div class="cs_wholesale_msg_wrpr top_msg_wrpr"><div class="cs_wholesale_msg_close cs_close top_msg_close">' + close_svg + '</div>' + wholesale_widget + '</div>';
              if (jQuerycs(".cs_wholesale_msg").length == 0) {
                csdivn = '<div class="cs_wholesale_msg top_msg_main ' + bar_class + '" style="display:none;"><div class="cs_wholesale_msg_wrpr top_msg_wrpr"><div class="cs_wholesale_msg_close cs_close top_msg_close">' + close_svg + '</div>' + wholesale_widget + '</div></div>';
              }
              (jQuerycs(".cs_wholesale_msg").length == 0) ? ((jQuerycs(".aiod-wholesale-discount-topbar").length == 0) ? jQuerycs('body').prepend(csdivn) : jQuerycs('.aiod-wholesale-discount-topbar').prepend(csdivn)) : jQuerycs(".cs_wholesale_msg").html(csdivn);
              if (jQuerycs(".cs_wholesale_msg").length > 0 && !jQuerycs('.cs_wholesale_msg').is(':visible')) {
                setTimeout(function () {
                  jQuerycs('.cs_wholesale_msg').slideDown();
                }, 500);
              }
            } else {
              remove_wholesale_msg();
            }
          }
          window.data_bg_product = function (product, bg_offer, pv_def_var) {
            var first_variant = '';
            if (bg_offer.offer_type_get_text == "Variant" && bg_offer.selection_type_get_text == "Custom Selection") {
              jQuerycs(product.variants).each(function (ii, variant) {
                if (pv_def_var.indexOf(variant.id) > -1 && variant.available) {
                  first_variant = '?variant=' + variant.id;
                  return false;
                }
              });
            }
            var img_src = imgURL('https://cdn.shopify.com/s/files/1/0438/3712/8857/files/csapp-placeholder-image.png?v=1618902140', '50x50'),
                img_alt = product.title;
            if (product.media) {
              img_src = imgURL(product.media[0].preview_image.src, '50x50'), img_alt = product.media[0].alt;
            }
            return '<div class="cs_block_product is_get"><a href="' + product.url + first_variant + '"><img src="' + img_src + '" alt="' + img_alt + '"></a><div class="cs-hover-outer"><div class="cs-message"><em>' + bg_offer.title + '</em></div><div class="cs-bogo-name">' + product.title + '</div></div></div>';
          }
          window.bogo_one_offer = function (bg_offer, bogo_setting) {
            var center_data = '', bg_cnt = '',
                ofr_desc = (typeof bg_offer.description !== 'undefined' && bg_offer.description != null && bg_offer.description != '') ? '<p class="bogo_desc_content">' + bg_offer.description + '</p>' : '';
            if (bg_offer.selection_type_get_text == "All") {
              var msg_all = (bg_offer.setting_type == 2 && bg_offer.setting_json != null && typeof bg_offer.setting_json.store_product_message !== 'undefined' && bg_offer.setting_json.store_product_message != '' && bg_offer.setting_json.store_product_message != null) ? bg_offer.setting_json.store_product_message : ((bg_offer.setting_type == 1 && bogo_setting != null && bogo_setting.store_product_message !== 'undefined' && bogo_setting.store_product_message != '' && bogo_setting.store_product_message != null) ? bogo_setting.store_product_message : '');
              center_data += (msg_all != '') ? "<p><a href='/collections/all'>" + msg_all + "</a></p>" : '';
            } else {
              if (bg_offer.offer_type_get_text == "Collections") {
                var msg_collection = (bg_offer.setting_type == 2 && bg_offer.setting_json != null && typeof bg_offer.setting_json.store_collection_message !== 'undefined' && bg_offer.setting_json.store_collection_message != '' && bg_offer.setting_json.store_collection_message != null) ? bg_offer.setting_json.store_collection_message : ((bg_offer.setting_type == 1 && bogo_setting != null && bogo_setting.store_collection_message !== 'undefined' && bogo_setting.store_collection_message != '' && bogo_setting.store_collection_message != null) ? bogo_setting.store_collection_message : '');
                center_data += "<p>" + msg_collection + " ";
                var get_collections = [];
                jQuerycs(bg_offer.collections_get).each(function (i_c, collection) {
                  get_collections.push("<a href='/collections/" + collection.handle + "'>" + collection.title + "</a>");
                });
                get_collections = get_collections.join(', ');
                center_data += get_collections + "</p>";
              } else {
                if (bg_offer.products_get.length) {
                  jQuerycs(bg_offer.products_get).each(function (i, pv) {
                    var pv_def_var = pv.default_variant_ids;
                    if (window.csapps.all_products[pv.handle] == undefined) {
                      var P_URL = '/products/' + pv.handle + '.js?csapp=aiod';
                      jQuerycs.ajax({
                        url: P_URL,
                        timeout: other_call_timeout,
                        dataType: 'json',
                        async: false,
                        success: function (product) {
                          window.csapps.all_products[product.handle] = product;
                          center_data += data_bg_product(product, bg_offer, pv_def_var);
                        },
                        error: function (jqXHR, textStatus) {
                        }
                      });
                    } else {
                      var product = window.csapps.all_products[pv.handle];
                      center_data += data_bg_product(product, bg_offer, pv_def_var);
                    }
                  });
                }
              }
            }

            bg_cnt += (center_data != '') ? '<div class="cs_bogo_get_pro_wrpr"><h4 class="cs-message-heading">' + bg_offer.title + '</h4>' + ofr_desc + '<div class="csapp-products">' + center_data + '</div></div>' : '';
            window.csapps.Data_bogo[bg_offer.id] = bg_cnt;
            return bg_cnt;
          }
          window.show_bogo_msg = function (result) {
            var cs_bogo = result.data, bogo_widget = '',
                bogo_setting = result.settings.language.setting.bogo_settings;
            jQuerycs(cs_bogo).each(function (v_i, bg_offer) {
              var get_bogo_variants_id = '', show_offer = false;
              if (bg_offer.selection_type_text == 'All') {
                show_offer = true;
              } else {
                if (bg_offer.offer_type_text == 'Collections') {
                  jQuerycs(bg_offer.collections).each(function (i, cv) {
                    if (window.csapps.product_collection.indexOf(Number(cv.shopify_collection_id)) > -1) {
                      show_offer = true;
                      return false;
                    }
                  });
                } else {
                  jQuerycs(bg_offer.products).each(function (i, pv) {
                    if (window.csapps.product_id == pv.product_id) {
                      show_offer = true;
                      get_bogo_variants_id = pv.default_variant_ids;
                      return false;
                    }
                  });
                }
              }
              if (show_offer) {
                if (bg_offer.offer_type_text == 'Variant' && bg_offer.selection_type_text == 'Custom Selection') {
                  window.csapps.bogo_is_variant = 1;
                  if (get_bogo_variants_id.indexOf(window.csapps.product.selected_variant) > -1) {
                    if (window.csapps.Data_bogo[bg_offer.id]) {
                      bogo_widget += window.csapps.Data_bogo[bg_offer.id];
                    } else {
                      bogo_widget += bogo_one_offer(bg_offer, bogo_setting);
                    }
                  }
                } else {
                  if (window.csapps.Data_bogo[bg_offer.id]) {
                    bogo_widget += window.csapps.Data_bogo[bg_offer.id];
                  } else {
                    bogo_widget += bogo_one_offer(bg_offer, bogo_setting);
                  }
                }
              }
            });
            jQuerycs('.aiod-bogo-discount-wrap').html(bogo_widget);
          }
          window.bogo_pop_gird = function (product, pv_def_var, discount_type, discount_value) {
            var hide_bogo_sel = (product.variants[0].option1.toLowerCase() == 'default title') ? 'style="display: none !important;"' : '';
            var cnt_var = 0, price_content = '', btn_text = '', all_options = '',
                select_box = '<select name="id" class="bodo_grid_select cs_single_op_selector" ' + hide_bogo_sel + ' onchange="change_grid_price(this,`bogo`);">';
            jQuerycs(product.variants).each(function (V_I, V_V) {
              var selected = '', disabled_txt = '', atc_text = window.csapps.bogo_atc;
              if (pv_def_var.indexOf(V_V.id) > -1) {
                var b_price = ((discount_type == 0) ? V_V.price - ((V_V.price * discount_value) / 100) : (((discount_value * 100) < V_V.price) ? V_V.price - (discount_value * 100) : 0));
                var b_cmp = (V_V.compare_at_price != null && V_V.compare_at_price != '' && typeof V_V.compare_at_price !== 'undefined') ? V_V.compare_at_price : V_V.price;
                cnt_var++;
                if (cnt_var == 1) {
                  selected = 'selected="selected"';
                  if (!V_V.available) {
                    disabled_txt = 'disabled="disabled"';
                    atc_text = window.csapps.bogo_soldout;
                  }
                  price_content += '<span class="money" data-wg-notranslate="manual">' + csapps.formatMoney(b_price, wmf) + '</span>';
                  price_content += (b_cmp > b_price) ? '<del><span class="money" data-wg-notranslate="manual">' + csapps.formatMoney(b_cmp, wmf) + '</span></del>' : '';
                  btn_text += '<button class="bogo_atc_btn csapp_btn grid_atc_btn" ' + disabled_txt + ' >' + atc_text + '</button>';
                }
                all_options += '<option ' + selected + ' value="' + V_V.id + '" data-title="' + V_V.title + '" data-ptitle="' + product.title + '" data-compare-price="' + b_cmp + '" data-price="' + b_price + '" data-available="' + V_V.available + '">' + V_V.title + '</option>'
              }
            });
            if (all_options == '') {
              return '';
            } else {
              select_box += all_options + '</select>';
              var img_src = imgURL('https://cdn.shopify.com/s/files/1/0438/3712/8857/files/csapp-placeholder-image.png?v=1618902140', '300x'),
                  img_alt = product.title;
              if (product.media) {
                img_src = imgURL(product.media[0].preview_image.src, '300x');
                img_alt = product.media[0].alt;
              }
              return '<div class="csapps-bogo-thumb is_grid_thumb"><div class="csapp-bogo-inner grid_inner"><a href="' + product.url + '" class="grid_img"><img src="' + img_src + '" alt="' + img_alt + '"></a><div class="csapps-p-detail"><div class="csapps-p-title"><a href="' + product.url + '">' + product.title + '</a></div><form method="post" class="csapp_bogo_cart_form single_grid_form" action="/cart/add" accept-charset="UTF-8" enctype="multipart/form-data" novalidate="novalidate" ><input type="hidden" name="form_type" value="product"><input type="hidden" name="utf8" value="">' + select_box + '<div class="csapps-price">' + price_content + '</div><div class="bogo_atc_wrpr g_b_w">' + btn_text + '</div></form></div></div></div>';
            }
          }
          window.bogo_product_popup = function (result) {
            var bogo_setting = result.settings.language.setting.bogo_settings,
                general_msgs = result.settings.general.setting.messages, pop_inner_content = '', offer_pos = 0;
            window.csapps.bogo_atc = (bogo_setting.add_to_cart_button_text != null && bogo_setting.add_to_cart_button_text != '') ? bogo_setting.add_to_cart_button_text : 'Add To Cart', window.csapps.bogo_soldout = (bogo_setting.sold_out_button_text != null && bogo_setting.sold_out_button_text != '') ? bogo_setting.sold_out_button_text : 'Sold out';
            if (!jQuerycs('.bogo_popup').length) {
              jQuerycs('body').append('<div class="cs_bogo_overlay cs_overlay bogo_popup"></div><div class="cs_bogo_popup cs_popup bogo_popup"></div>');
            }
            jQuerycs(result.bogo_popup.data).each(function (i_p, bg_offer) {
              var inside_all_val = '', is_grid = '', heading_active = '';
              if (bg_offer.upsell_popup == 1) {
                offer_pos++;
                if (bg_offer.selection_type_get_text == "All") {
                  var msg_all = (bg_offer.setting_type == 2 && bg_offer.setting_json != null && typeof bg_offer.setting_json.store_product_message !== 'undefined' && bg_offer.setting_json.store_product_message != '' && bg_offer.setting_json.store_product_message != null) ? bg_offer.setting_json.store_product_message : ((bg_offer.setting_type == 1 && bogo_setting != null && typeof bogo_setting.store_product_message !== 'undefined' && bogo_setting.store_product_message != '' && bogo_setting.store_product_message != null) ? bogo_setting.store_product_message : '');
                  inside_all_val += (msg_all != '') ? "<p><a href='/collections/all'>" + msg_all + "</a></p>" : '';
                } else {
                  if (bg_offer.offer_type_get_text == "Collections") {
                    var msg_collection = (bg_offer.setting_type == 2 && bg_offer.setting_json != null && typeof bg_offer.setting_json.store_collection_message !== 'undefined' && bg_offer.setting_json.store_collection_message != '' && bg_offer.setting_json.store_collection_message != null) ? bg_offer.setting_json.store_collection_message : ((bg_offer.setting_type == 1 && bogo_setting != null && typeof bogo_setting.store_collection_message !== 'undefined' && bogo_setting.store_collection_message != '' && bogo_setting.store_collection_message != null) ? bogo_setting.store_collection_message : '');
                    inside_all_val += "<p>" + msg_collection + " ";
                    var get_collections = [];
                    jQuerycs(bg_offer.collections_get).each(function (i_c, collection) {
                      get_collections.push("<a href='/collections/" + collection.handle + "'>" + collection.title + "</a>");
                    });
                    get_collections = get_collections.join(', ');
                    inside_all_val += get_collections + "</p>";
                  } else {
                    is_grid = 'is_grid';
                    if (bg_offer.products_get.length) {
                      jQuerycs(bg_offer.products_get).each(function (i, pv) {
                        var pv_def_var = pv.default_variant_ids;
                        if (window.csapps.all_products[pv.handle] == undefined) {
                          var P_URL = '/products/' + pv.handle + '.js?csapp=aiod';
                          jQuerycs.ajax({
                            url: P_URL,
                            timeout: other_call_timeout,
                            dataType: 'json',
                            async: false,
                            success: function (product) {
                              window.csapps.all_products[product.handle] = product;
                              inside_all_val += bogo_pop_gird(product, pv_def_var, bg_offer.discount_type, bg_offer.discount_value);
                            },
                            error: function (jqXHR, textStatus) {
                            }
                          });
                        } else {
                          var product = window.csapps.all_products[pv.handle];
                          inside_all_val += bogo_pop_gird(product, pv_def_var, bg_offer.discount_type, bg_offer.discount_value);
                        }
                      });
                    }
                  }
                }
                heading_active = (offer_pos == 1) ? 'active' : '';
                pop_inner_content += (inside_all_val != '') ? "<div class='cs_bogo_offer_wrpr csapp_popup_wrpr'><h4 class='" + heading_active + "'><span><svg width='16' height='8' viewBox='0 0 16 8' fill='none' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' clip-rule='evenodd' d='M0 0L8 8L16 0L0 0Z' fill='#007F60'></path></svg></span>" + bg_offer.title + "</h4><div class='cs_offer_content " + is_grid + "'><div class='cs_offer_content_wp'>" + inside_all_val + "</div></div></div>" : '';
              }
            });
            if (pop_inner_content != '') {
              var bogo_open = csapps.get_local_data('csbogo');
              if (bogo_open == 0 || bogo_open == null) {
                var no_thanks_msg = (typeof general_msgs.no_thanks !== 'undefined' && general_msgs.no_thanks != null && general_msgs.no_thanks != '') ? '<span class="close_bogo no_thanks_popup">' + general_msgs.no_thanks + '</span>' : '';
                jQuerycs('.cs_bogo_popup').html('<div class="cs_bogo_wrpr cs_p_g_wrpr"><div class="cs_bogo_pop_close popup_close">' + close_svg + '</div><div class="cs_bogo_popup_content cs_p_c_m">' + pop_inner_content + '</div>' + no_thanks_msg + '</div>');
                (!jQuerycs('.free_gift_popup.cs_show').length) ? jQuerycs('.bogo_popup').addClass('cs_show') : '';
              }
              cart_bogo_btn = (typeof bogo_setting.cart_show_bogo_button !== 'undefined' && bogo_setting.cart_show_bogo_button != null && bogo_setting.cart_show_bogo_button != '') ? bogo_setting.cart_show_bogo_button : ''
              if (jQuerycs(".cs_bogo_popup_opener").length == 0 && cart_bogo_btn != '') {
                jQuerycs(checkout_selectors).after('<button type="button" class="btn button cs_bogo_popup_opener">' + cart_bogo_btn + '</button>');
              }
            } else {
              remove_bogo_popup();
              jQuerycs('.cs_bogo_popup_opener').remove();
            }
            jQuerycs('.cs_bogo_popup_opener').removeAttr('disabled');
          }
          window.bogocontent = function () {
            if (window.csapps.bogo_server_data == undefined) {
              var col_ids_pass = (window.csapps.page_type == 'product') ? window.csapps.product_collections : window.csapps.collection_id;
              if (window.csapps.customer) {
                data = {
                  product_id: window.csapps.product_id,
                  shop: window.csapps.store_id,
                  cid: window.csapps.customer.id,
                  collection_ids: col_ids_pass,
                  request_type: '3'
                }
              } else {
                data = {
                  product_id: window.csapps.product_id,
                  shop: window.csapps.store_id,
                  collection_ids: col_ids_pass,
                  request_type: '3'
                }
              }
              window.csapps.bogo_request_ajax = jQuerycs.ajax({
                type: "GET",
                url: window.csapps.vd_url + "/api/display-discount-table",
                timeout: other_call_timeout,
                data: data,
                crossDomain: true,
                dataType: 'json',
                beforeSend: function () {
                  if (window.csapps.bogo_request_ajax != 'ToCancelPrevReq' && window.csapps.bogo_request_ajax.readyState < 4) {
                    window.csapps.bogo_request_ajax.abort();
                  }
                },
                success: function (result) {
                  window.csapps.bogo_server_data = result;
                  if (result.data.length > 0) {
                    caapp_style(result.settings);
                    if (window.csapps.page_type == "product") {
                      show_bogo_msg(result);
                    }
                    bogo_top_msg(result, 0);
                  }
                },
                error: function (jqXHR, textStatus) {
                }
              });
            } else {
              var result = window.csapps.bogo_server_data;
              if (result.data.length > 0) {
                if (window.csapps.page_type == "product") {
                  show_bogo_msg(result);
                }
                bogo_top_msg(result, 0);
              }
            }
          }
          window.wholesalecontent = function () {
            if (window.csapps.wholesale_server_data == undefined) {
              var col_ids_pass = (window.csapps.page_type == 'product') ? window.csapps.product_collections : window.csapps.collection_id;
              if (window.csapps.customer) {
                data = {
                  product_id: window.csapps.product_id,
                  shop: window.csapps.store_id,
                  cid: window.csapps.customer.id,
                  collection_ids: col_ids_pass,
                  request_type: '2'
                }
              } else {
                data = {
                  product_id: window.csapps.product_id,
                  shop: window.csapps.store_id,
                  collection_ids: col_ids_pass,
                  request_type: '2'
                }
              }
              window.csapps.wholesale_request_ajax = jQuerycs.ajax({
                type: "GET",
                url: window.csapps.vd_url + "/api/display-discount-table",
                timeout: other_call_timeout,
                data: data,
                crossDomain: true,
                dataType: 'json',
                beforeSend: function () {
                  if (window.csapps.wholesale_request_ajax != 'ToCancelPrevReq' && window.csapps.wholesale_request_ajax.readyState < 4) {
                    window.csapps.wholesale_request_ajax.abort();
                  }
                },
                success: function (result) {
                  window.csapps.wholesale_server_data = result;
                  if (result.data.length > 0) {
                    wholesale_top_msg(result);
                  }
                },
                error: function (jqXHR, textStatus) {
                }
              });
            } else {
              var result = window.csapps.wholesale_server_data;
              if (result.data.length > 0) {
                wholesale_top_msg(result);
              }
            }
          }
          window.table_post = function (data) {
            if (data.data.length || data.settings.length) {
              var cs_volume = data.data, setting = data.settings, volume_widget = '';
              jQuerycs(cs_volume).each(function (b_i, vt_offer) {
                var get_volume_variants_id = '';
                if (vt_offer.offer_type_text == 'Variant' && vt_offer.selection_type_text == 'Custom Selection') {
                  window.csapps.volumn_is_variant = 1;
                  jQuerycs(vt_offer.products).each(function (i, pv) {
                    if (window.csapps.product_id == pv.product_id) {
                      get_volume_variants_id = pv.default_variant_ids;
                      return false;
                    }
                  });
                  if (get_volume_variants_id.indexOf(window.csapps.product.selected_variant) > -1) {
                    if (window.csapps.Data_volume[vt_offer.id]) {
                      volume_widget += window.csapps.Data_volume[vt_offer.id];
                    } else {
                      volume_widget += eligible_offer(vt_offer, setting);
                    }
                  }
                } else {
                  if (window.csapps.Data_volume[vt_offer.id]) {
                    volume_widget += window.csapps.Data_volume[vt_offer.id];
                  } else {
                    volume_widget += eligible_offer(vt_offer, setting);
                  }
                }
              });
              var table_setting = setting['table-design'].setting;
              volume_widget += "<style>.csapps-volume-discount-tiers { border: " + table_setting.table_border_width + "px  " + table_setting.table_border_type + " " + table_setting.table_border_color + ";  max-width: " + table_setting.table_max_width + "; min-width: " + table_setting.table_min_width + ";}.csapps-table thead {background-color: " + table_setting.table_header_background_color + ";font-size: " + table_setting.table_font_size + "px;color: #000000;}.csapps-table tbody {background-color:  " + table_setting.table_background_color + ";font-size:  " + table_setting.table_font_size + "px;color: " + table_setting.table_font_color + "}.csapps-table th{font-style: " + table_setting.table_header_font_style + ";border:0;padding:12px 15px;}.csapps-table thead tr th{border-bottom: " + table_setting.table_border_width + "px " + table_setting.table_border_type + " " + table_setting.table_header_border_color + ";}.csapps-table tbody tr td{border-bottom: " + table_setting.table_border_width + "px " + table_setting.table_border_type + " " + table_setting.table_border_color + ";}.csapps-table tbody tr:hover { background-color: " + table_setting.table_hover_background_color + "; }</style>"
              jQuerycs('.aiod-volume-discount-wrap').html(volume_widget);
            }
          }
          window.volumeTable = function () {
            if (window.csapps.table_Data == undefined) {
              if (window.csapps.customer) {
                data = {
                  product_id: window.csapps.product_id,
                  shop: window.csapps.store_id,
                  cid: window.csapps.customer.id,
                  collection_ids: window.csapps.product_collections,
                  request_type: '1'
                }
              } else {
                data = {
                  product_id: window.csapps.product_id,
                  shop: window.csapps.store_id,
                  collection_ids: window.csapps.product_collections,
                  request_type: '1'
                }
              }
              window.csapps.volumn_request_ajax = jQuerycs.ajax({
                type: "GET",
                url: window.csapps.vd_url + "/api/display-discount-table",
                timeout: other_call_timeout,
                data: data,
                crossDomain: true,
                dataType: 'json',
                beforeSend: function () {
                  if (window.csapps.volumn_request_ajax != 'ToCancelPrevReq' && window.csapps.volumn_request_ajax.readyState < 4) {
                    window.csapps.volumn_request_ajax.abort();
                  }
                },
                success: function (data) {
                  window.csapps.table_Data = data;
                  if (data.data.length > 0) {
                    caapp_style(data.settings);
                    if (window.csapps.page_type == "product") {
                      table_post(data)
                    }
                  }
                },
                error: function (jqXHR, textStatus) {
                }
              });
            } else {
              if (window.csapps.page_type == "product") {
                var data = window.csapps.table_Data;
                table_post(data)
              }
            }
          }
          window.general_top_msg = function (result, cart_main) {
            top_bar_css_all(result.settings.general.setting.top_bar);
            var general_setting = result.settings.language.setting.general_settings, csdivn = '', offer_txt = '',
                get_amt = need_to_add_price = need_to_add_qty = 0, filter_condition = 2;
            jQuerycs(result.general_popup).each(function (b_i, gnl_offer) {
              offer_txt = (typeof general_setting.initial_message !== "undefined" && general_setting.initial_message != null && general_setting.initial_message != '') ? '<p>' + general_setting.initial_message + '</p>' : '', get_amt = (gnl_offer.discount_type == 0) ? gnl_offer.discount_value + '%' : csapps.formatMoney(gnl_offer.discount_value * 100, wmf);
              if (typeof gnl_offer.condition !== "undefined") {
                need_to_add_price = gnl_offer.condition.required_total * 100 , need_to_add_qty = gnl_offer.condition.required_quantity, filter_condition = gnl_offer.condition.filter_condition;
              }
              return false;
            });
            if (need_to_add_price > 0 || need_to_add_qty > 0) {
              var repalce_text = (need_to_add_price > 0) ? csapps.formatMoney(need_to_add_price, wmf) : '';
              offer_txt = (offer_txt.indexOf('{{ amount }}') > -1) ? offer_txt.replace("{% raw %}{{amount}}{% endraw %}", repalce_text) : offer_txt;
                                             }
                                             offer_txt = (offer_txt.indexOf('{{ discount }}') > -1) ? offer_txt.replace("{% raw %}{{discount}}{% endraw %}", get_amt) : offer_txt;
                                             if (offer_txt != '') {
                           csdivn = '<div class="cs_general_msg_wrpr top_msg_wrpr"><div class="cs_general_msg_close cs_close top_msg_close">' + close_svg + '</div>' + offer_txt + '</div>';
                           if (jQuerycs(".cs_general_msg").length == 0) {
                csdivn = '<div class="cs_general_msg top_msg_main" style="display:none;"><div class="cs_general_msg_wrpr top_msg_wrpr"><div class="cs_general_msg_close cs_close top_msg_close">' + close_svg + '</div>' + offer_txt + '</div></div>';
              }
              (jQuerycs(".cs_general_msg").length == 0) ? ((jQuerycs(".aiod-general-discount-topbar").length == 0) ? jQuerycs('body').prepend(csdivn) : jQuerycs('.aiod-general-discount-topbar').prepend(csdivn)) : jQuerycs(".cs_general_msg").html(csdivn);
              if (jQuerycs(".cs_general_msg").length > 0 && !jQuerycs('.cs_general_msg').is(':visible')) {
                setTimeout(function () {
                  jQuerycs('.cs_general_msg').slideDown();
                }, 500);
              }
            }
          }
          window.free_gift_top_msg = function (result, cart_main) {
            var need_to_add_price = result.free_gift_popup[0].required_cart_total * 100,
                free_gift_settings = result.settings.language.setting.free_gift_settings,
                offer_txt = (typeof free_gift_settings.initial_message !== "undefined" && free_gift_settings.initial_message != null && free_gift_settings.initial_message != '') ? '<p>' + free_gift_settings.initial_message + '</p>' : '';
            if (need_to_add_price > 0 && offer_txt != '') {
              top_bar_css_all(result.settings.general.setting.top_bar);
              offer_txt = (offer_txt.indexOf('{{ amount }}') > -1) ? offer_txt.replace("{% raw %}{{amount}}{% endraw %}", csapps.formatMoney(need_to_add_price, wmf)) : offer_txt;
                                             csdivn = '<div class="cs_free_p_msg_wrpr top_msg_wrpr"><div class="cs_free_p_msg_close cs_close top_msg_close">' + close_svg + '</div>' + offer_txt + '</div>';
                                             if (jQuerycs(".cs_free_p_msg").length == 0) {
                csdivn = '<div class="cs_free_p_msg top_msg_main" style="display:none;"><div class="cs_free_p_msg_wrpr top_msg_wrpr"><div class="cs_free_p_msg_close cs_close top_msg_close">' + close_svg + '</div>' + offer_txt + '</div></div>';
              }
              (jQuerycs(".cs_free_p_msg").length == 0) ? ((jQuerycs(".aiod-freeproduct-topbar").length == 0) ? jQuerycs('body').prepend(csdivn) : jQuerycs('.aiod-freeproduct-topbar').prepend(csdivn)) : jQuerycs(".cs_free_p_msg").html(csdivn);
              if (jQuerycs(".cs_free_p_msg").length > 0 && !jQuerycs('.cs_free_p_msg').is(':visible')) {
                setTimeout(function () {
                  jQuerycs('.cs_free_p_msg').slideDown();
                }, 500);
              }
            } else {
              remove_free_gift_msg();
            }
          }
          window.free_gift_product_grid = function (product, P_V, result) {
            var max_discount = result.free_gift_popup[0].max_discount,
                discount_type = result.free_gift_popup[0].discount_type,
                discount_value = result.free_gift_popup[0].discount_value,
                hide_sel = (product.variants[0].option1.toLowerCase() == 'default title') ? 'style="display: none !important;"' : '',
                cnt_var = 0, price_content = '', btn_text = '', all_options = '',
                select_box = '<select name="id" class="free_p_grid_select cs_single_op_selector" ' + hide_sel + ' onchange="change_grid_price(this,`free_gift`);">';
            if (typeof max_discount !== 'undefined' && max_discount != null && max_discount != '') {
              max_discount = max_discount * 100;
            }
            jQuerycs(product.variants).each(function (V_I, V_V) {
              var selected = '', disabled_txt = '', atc_text = window.csapps.free_g_atc;
              if (P_V.default_variant_ids.indexOf(V_V.id) > -1) {
                var b_price = ((discount_type == 0) ? V_V.price - ((typeof max_discount !== 'undefined' && max_discount != null && max_discount != '') ? (((max_discount < ((V_V.price * discount_value) / 100)) ? max_discount : ((V_V.price * discount_value) / 100))) : ((V_V.price * discount_value) / 100)) : (((discount_value * 100) < V_V.price) ? V_V.price - (discount_value * 100) : 0));
                var b_cmp = (V_V.compare_at_price != null && V_V.compare_at_price != '' && typeof V_V.compare_at_price !== 'undefined') ? V_V.compare_at_price : V_V.price;
                cnt_var++;
                if (cnt_var == 1) {
                  selected = 'selected="selected"';
                  if (!V_V.available) {
                    disabled_txt = 'disabled="disabled"';
                    atc_text = window.csapps.free_g_soldout;
                  }
                  price_content += '<span class="money" data-wg-notranslate="manual">' + csapps.formatMoney(b_price, wmf) + '</span>';
                  price_content += (b_cmp > b_price) ? '<del><span class="money" data-wg-notranslate="manual">' + csapps.formatMoney(b_cmp, wmf) + '</span></del>' : '';
                  btn_text += '<button class="freeg_atc_btn csapp_btn grid_atc_btn" ' + disabled_txt + ' >' + atc_text + '</button>';
                }
                all_options += '<option ' + selected + ' value="' + V_V.id + '" data-title="' + V_V.title + '" data-ptitle="' + product.title + '" data-compare-price="' + b_cmp + '" data-price="' + b_price + '" data-available="' + V_V.available + '">' + V_V.title + '</option>'
              }
            });
            if (all_options == '') {
              return '';
            } else {
              select_box += all_options + '</select>';
              var img_src = imgURL('https://cdn.shopify.com/s/files/1/0438/3712/8857/files/csapp-placeholder-image.png?v=1618902140', '300x'),
                  img_alt = product.title;
              if (product.media) {
                img_src = imgURL(product.media[0].preview_image.src, '300x');
                img_alt = product.media[0].alt;
              }
              return '<div class="csapps-freeg-thumb is_grid_thumb"><div class="csapp-freeg-inner grid_inner"><a href="' + product.url + '" class="grid_img"><img src="' + img_src + '" alt="' + img_alt + '"></a><div class="csapps-p-detail"><div class="csapps-p-title"><a href="' + product.url + '">' + product.title + '</a></div><form method="post" class="csapp_freeg_cart_form single_grid_form" action="/cart/add" accept-charset="UTF-8" enctype="multipart/form-data" novalidate="novalidate" ><input type="hidden" name="form_type" value="product"><input type="hidden" name="utf8" value="">' + select_box + '<div class="csapps-price">' + price_content + '</div><div class="freeg_atc_wrpr g_b_w">' + btn_text + '</div></form></div></div></div>';
            }
          }
          window.free_gift_product_popup = function (result, cart_main) {
            var need_to_add_price = result.free_gift_popup[0].required_cart_total * 100, fg_popup_html = '',
                free_gift_settings = result.settings.language.setting.free_gift_settings, pop_inner_content = '',
                general_msgs = result.settings.general.setting.messages;
            window.csapps.free_g_atc = (free_gift_settings.add_to_cart_button_text != null && free_gift_settings.add_to_cart_button_text != '') ? free_gift_settings.add_to_cart_button_text : 'Add To Cart', window.csapps.free_g_soldout = (free_gift_settings.sold_out_button_text != null && free_gift_settings.sold_out_button_text != '') ? free_gift_settings.sold_out_button_text : 'Sold out';
            if (need_to_add_price <= 0) {
              if (!jQuerycs('.free_gift_popup').length) {
                jQuerycs('body').append('<div class="cs_free_product_overlay cs_overlay free_gift_popup"></div><div class="cs_free_product_popup cs_popup free_gift_popup"></div>');
              }
              jQuerycs(result.free_gift_popup[0].free_gift_products).each(function (P_I, P_V) {
                var P_URL = '/products/' + P_V.handle + '.js?csapp=aiod';
                if (window.csapps.all_products[P_V.handle] == undefined) {
                  jQuerycs.ajax({
                    url: P_URL,
                    timeout: other_call_timeout,
                    dataType: 'json',
                    async: false,
                    success: function (product) {
                      window.csapps.all_products[P_V.handle] = product;
                      fg_popup_html += free_gift_product_grid(product, P_V, result);
                    },
                    error: function (jqXHR, textStatus) {
                    }
                  });
                } else {
                  var product = window.csapps.all_products[P_V.handle];
                  fg_popup_html += free_gift_product_grid(product, P_V, result);
                }
              });
              if (fg_popup_html != '') {
                var free_open = csapps.get_local_data('csfree');
                if (free_open == 0 || free_open == null) {
                  var no_thanks_msg = (typeof general_msgs.no_thanks !== 'undefined' && general_msgs.no_thanks != null && general_msgs.no_thanks != '') ? '<span class="close_free no_thanks_popup">' + general_msgs.no_thanks + '</span>' : '';
                  jQuerycs('.cs_free_product_popup').html('<div class="cs_freeg_wrpr cs_p_g_wrpr"><div class="cs_freeg_pop_close popup_close">' + close_svg + '</div><div class="cs_free_popup_content cs_p_c_m"><div class="cs_fg_offer_wrpr csapp_popup_wrpr"><h4 class="active"><span><svg width="16" height="8" viewBox="0 0 16 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 0L8 8L16 0L0 0Z" fill="#007F60"></path></svg></span>' + result.free_gift_popup[0].title + '</h4><div class="cs_offer_content is_grid"><div class="cs_offer_content_wp">' + fg_popup_html + '</div></div></div></div>' + no_thanks_msg + '</div>');
                  jQuerycs('.free_gift_popup').addClass('cs_show');
                }
                cart_freeg_btn = (typeof free_gift_settings.cart_show_gift_button !== 'undefined' && free_gift_settings.cart_show_gift_button != null && free_gift_settings.cart_show_gift_button != '') ? free_gift_settings.cart_show_gift_button : ''
                if (jQuerycs(".cs_freeg_popup_opener").length == 0 && cart_freeg_btn != '') {
                  jQuerycs(checkout_selectors).after('<button type="button" class="btn button cs_freeg_popup_opener">' + cart_freeg_btn + '</button>');
                }
              } else {
                remove_free_gift_popup();
                jQuerycs('.cs_freeg_popup_opener').remove();
              }
              jQuerycs('.cs_freeg_popup_opener').removeAttr('disabled');
            } else {
              remove_free_gift_popup();
              jQuerycs('.cs_freeg_popup_opener').remove();
            }
          }
          window.fire_cart_data = function (count, pop) {
            if (jQuerycs('.csapps-cart-original-total').length) {
              window.csapps.firing_popup = 1;
              jQuerycs(checkout_selectors).attr('disabled', true);
              window.csapps.normal_cart_ajax = jQuerycs.ajax({
                url: 'https://' + window.location.host + PROXY_PATH_CART,
                timeout: other_call_timeout,
                dataType: 'json',
                type: 'POST',
                beforeSend: function () {
                  if (window.csapps.normal_cart_ajax != 'ToCancelPrevReq' && window.csapps.normal_cart_ajax.readyState < 4) {
                    window.csapps.normal_cart_ajax.abort();
                  }
                },
                success: function (vdata) {
                  jQuerycs('<script>' + vdata.collection + vdata.cs_cart_count + '</' + 'script>').appendTo(document.body);
                  count = (window.csapps.cart.items.length <= 0) ? 0 : count;
                  if (window.csapps.cart.items.length > 0 || count == 1) {
                    var pv_cart_url = '', storage_code = localStorage.getItem('discount_code'),
                        cid = window.csapps.customer, json_data = window.csapps.cart_collections;
                    jQuerycs.getJSON("/cart.js?csapp=aiod", function (cart) {
                      pv_cart_url = window.csapps.vd_url + "/api/cart-request" + is_test + "?csapp=aiod";
                      var data = {
                        cid: cid,
                        cdata: cart,
                        cart_collections: json_data,
                        shop: window.csapps.store_id,
                        discount_cart_load: true
                      };
                      window.csapps.fire_cart_ajax = jQuerycs.ajax({
                        url: pv_cart_url,
                        timeout: cart_call_timeout,
                        data: data,
                        dataType: 'json',
                        type: 'POST',
                        beforeSend: function () {
                          if (window.csapps.fire_cart_ajax != 'ToCancelPrevReq' && window.csapps.fire_cart_ajax.readyState < 4) {
                            window.csapps.fire_cart_ajax.abort();
                          }
                        },
                        success: function (data) {
                          caapp_style(data.settings);
                          top_bar_css_all(data.settings.general.setting.top_bar);
                          var cart_d = data.cdata, bogo_data = data.bogo_popup,
                              discount_type = data.settings.discount.setting.apply_discount_on,
                              v_s = data.settings.language.setting.volume_settings;
                          csappsDoActions(cart_d, discount_type, v_s);
                          if (window.csapps.is_free_gift_discount && window.csapps.page_type == "cart") {
                            if (data.free_gift_popup.length) {
                              free_gift_top_msg(data, cart);
                              if (pop == 'all' || pop == 'free') {
                                free_gift_product_popup(data, cart);
                              }
                            } else {
                              remove_free_gift_msg();
                              jQuerycs('.cs_freeg_popup_opener').remove();
                              remove_free_gift_popup();
                            }
                          }
                          if (window.csapps.is_bogo_discount && window.csapps.page_type == "cart") {
                            if (bogo_data.data.length) {
                              bogo_top_msg(data, 1);
                              if (pop == 'all' || pop == 'bogo') {
                                bogo_product_popup(data);
                              }
                            } else {
                              remove_bogo_msg();
                              jQuerycs('.cs_bogo_popup_opener').remove();
                              remove_bogo_popup();
                            }
                          }
                          if (window.csapps.is_general_discount && window.csapps.page_type == "cart") {
                            if (data.general_popup.length) {
                              general_top_msg(data, cart);
                            } else {
                              remove_general_msg();
                            }
                          }
                          jQuerycs(checkout_selectors).attr('disabled', false);
                          if (cart_d.total_discount > 0) {
                            setTimeout(function () {
                              if (jQuerycs('.csapps-cart-original-total').length || jQuerycs('[data-csapp_line_wrapper] [data-csapp_price]').length || jQuerycs('[data-csapp_line_wrapper] [data-csapp_line_price]').length || jQuerycs('[data-csapp_line_wrapper] [data-csapp_discount_summery]').length) {
                                if (jQuerycs('.csapp-discount-list').length == 0 && jQuerycs('[data-csapp_price] .csapp-price').length == 0 && jQuerycs('[data-csapp_line_price] .csapp-line-price').length == 0 && jQuerycs('[data-csapp_discount_summery] .discount-label-conatiner').length == 0) {
                                  var count = 1;
                                  csappsStart(count);
                                }
                              }
                            }, 2000);
                          }
                          window.csapps.firing_popup = 0;
                        },
                        error: function (jqXHR, textStatus) {
                          console.log('Something went wrong. Please try again!');
                          jQuerycs(checkout_selectors).attr('disabled', false);
                        }
                      });
                    });
                  } else if (window.csapps.page_type == 'cart') {
                    remove_bogo_msg();
                    jQuerycs('.cs_bogo_popup_opener').remove();
                    remove_bogo_popup();
                    remove_general_msg();
                    remove_free_gift_msg();
                    jQuerycs('.cs_freeg_popup_opener').remove();
                    remove_free_gift_popup();
                    window.csapps.firing_popup = 0;
                  } else {
                    window.csapps.firing_popup = 0;
                  }
                },
                error: function (jqXHR, textStatus) {
                  console.log('Something went wrong. Please try again!');
                  jQuerycs(checkout_selectors).attr('disabled', false);
                }
              });
            }
          }
          jQuerycs(window).on('load', function afterAppendData() {
            if (typeof csrundata !== "undefined") {
              csrundata();
            }
            if (jQuerycs(".cs_bogo_msg").length > 0 && !jQuerycs('.cs_bogo_msg').is(':visible')) {
              setTimeout(function () {
                jQuerycs('.cs_bogo_msg').slideDown();
              }, 1000);
            }
          });
          window.csappsStart = function (count) {
            setTimeout(function () {
              if (window.csapps.is_volume_discount || window.csapps.is_bogo_discount || window.csapps.is_wholesale_discount) {
                  window.csappsc = {};
                  if (window.csapps.page_type == "product") {
                    window.csappsc.first_add_to_cart_el = null;
                    var selectors = ["input[name='add']", "button[name='add']", "#add-to-cart", "#AddToCartText", "#AddToCart"];
                    var found_selectors = 0;
                    selectors.forEach(function (selector) {
                      found_selectors += jQuerycs(selector).length;
                      if (window.csappsc.first_add_to_cart_el == null && found_selectors) {
                        window.csappsc.first_add_to_cart_el = jQuerycs(selector).first()
                      }
                    });
                    if (window.csappsc.first_add_to_cart_el != null) {
                      var vol_el_after = window.csappsc.first_add_to_cart_el;
                      if (vol_el_after.parent().is("div")) {
                        vol_el_after = vol_el_after.parent()
                      }
                      if (jQuerycs(".aiod-volume-discount-wrap").length == 0 && window.csapps.is_volume_discount) {
                        vol_el_after.after('<div class="aiod-volume-discount-wrap" ></div>');
                      }
                      if (jQuerycs(".aiod-bogo-discount-wrap").length == 0 && window.csapps.is_bogo_discount) {
                        vol_el_after.after('<div class="aiod-bogo-discount-wrap"></div>');
                      }
                      if (jQuerycs(".aiod-wholesale-discount-topbar").length == 0 && window.csapps.is_wholesale_discount) {
                        vol_el_after.after('<div class="aiod-wholesale-discount-topbar"></div>');
                      }
                    }
                    product_page_btn_condition();
                    var selector_var = jQuerycs('body .cs_product_form_wrpr').length ? jQuerycs(".cs_product_form_wrpr .single-option-selector") : jQuerycs(".single-option-selector, select.form__input--select, .swatch-element input[type='radio'],.single-option-selector__radio:checked, select[data-option='option1'], select[data-option='option1']:checked, select[data-option='option2'], select[data-option='option2']:checked, select[data-option='option3'], select[data-option='option3']:checked, select[data-index='option1'], select[data-index='option1']:checked, select[data-index='option2'], select[data-index='option2']:checked, select[data-index='option3'], select[data-index='option3']:checked, ul li div[swatch-option='option1'], input[type='radio']:checked");
                    jQuerycs(selector_var).each(function (i, selector) {
                      jQuerycs('body').on('change', selector, (event) => {
                        product_page_btn_condition();
                        if (window.csapps.is_volume_discount && window.csapps.volumn_is_variant == 1) {
                          volumeTable();
                        }
                        if (window.csapps.is_bogo_discount && window.csapps.bogo_is_variant == 1) {
                          bogocontent();
                        }
                        if (window.csapps.is_wholesale_discount && window.csapps.wholesale_is_variant == 1) {
                          wholesalecontent();
                        }
                      });
                    });
                    if (window.csapps.is_volume_discount) {
                      volumeTable();
                    }
                    if (window.csapps.is_bogo_discount) {
                      bogocontent();
                    }
                    if (window.csapps.is_wholesale_discount) {
                      wholesalecontent();
                    }
                  } else if (window.csapps.page_type == "collection") {
                    if (window.csapps.is_bogo_discount) {
                      bogocontent();
                    }
                    if (window.csapps.is_wholesale_discount) {
                      wholesalecontent();
                    }
                  }
              }
              if (window.csapps.is_volume_discount || window.csapps.is_bogo_discount || window.csapps.is_bundle_discount || window.csapps.is_free_gift_discount || window.csapps.is_wholesale_discount || window.csapps.is_general_discount) {
                fire_cart_data(count, 'all');
              }
            }, 1000);
          }
          window.csappsStartBundle = function (count) {
            if (window.csapps.is_bundle_discount) {
              bundle_div = window.csapps.bundle_class;
              if (jQuerycs(bundle_div).length) {
                jQuerycs("<div class='loader' style='display:none;' ><img src=//aiod.cirkleinc.com/images/loader-app.gif></div>").insertBefore('.aiod-bundle-discount-wrap');
                jQuerycs(bundle_div).each(function (i, in_append) {
                  var getUrl = window.csapps.vd_url + "/api/display-discount-table?csapp=aiod";
                  var bundle_possiblity = check_bundle_possiblity(in_append)
                  bundleTable(getUrl, bundle_possiblity[0], in_append, bundle_possiblity[1]);
                });
              }
            }
          }
          csappsStart();
          if (window.csapps.is_bundle_discount) {
            csappsStartBundle();
          }
        }
      }

      if (typeof ignore_csapp_cart_reload === 'undefined') {
        var ignore_csapp_cart_reload = false;
      }
      if (typeof window.csapps !== 'undefined') {
        if ((typeof (jQuery) == 'undefined') || (parseInt(jQuery.fn.jquery) == 3 && parseFloat(jQuery.fn.jquery.replace(/^1\./, "")) < 2.1)) {
          csapp_loadScript('//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js?csapp=aiod', function () {
            jQuerycs = jQuery.noConflict(true);
            setMf(jQuerycs);
          });
        } else {
          setMf(jQuery);
        }
      }

      function setMf(jQuerycs) {
        start(jQuerycs);
        checkAppInstalled(jQuerycs);
        var csapp_store_cur_use = csapps.get_local_data('csapp_store_cur_use');
        var csapp_store_cur_cmp = csapps.get_local_data('csapp_store_cur_cmp');
        if (!window.current_shop) {
          if (csapp_store_cur_cmp != null && (typeof Shopify !== 'undefined' && typeof Shopify.currency !== 'undefined')) {
            if (csapp_store_cur_cmp == Shopify.currency.active) {
              wmf = csapp_store_cur_use;
            } else {
              jQuerycs.getJSON('https://' + window.location.host + PROXY_PATH, function (data) {
                wmf = data.format;
                csapps.set_local_data('csapp_store_cur_use', wmf);
                if (typeof Shopify !== 'undefined' && typeof Shopify.currency !== 'undefined') {
                  csapps.set_local_data('csapp_store_cur_cmp', Shopify.currency.active);
                }
              });
            }
          } else {
            jQuerycs.getJSON('https://' + window.location.host + PROXY_PATH, function (data) {
              wmf = data.format;
              csapps.set_local_data('csapp_store_cur_use', wmf);
              if (typeof Shopify !== 'undefined' && typeof Shopify.currency !== 'undefined') {
                csapps.set_local_data('csapp_store_cur_cmp', Shopify.currency.active);
              }
            });
          }
        }
      }

      (function (ns, fetch) {
        if (typeof fetch !== 'function') return;
        ns.fetch = function () {
          const response = fetch.apply(this, arguments);
          response.then(res => {
            if (window.csapps.firing_popup == 0 && res.url.toString().indexOf('csapp=aiod') == -1 && (res.url.toString().indexOf('https://' + window.csapps.store_domain + '/cart/add.js') > -1 || res.url.toString().indexOf('https://' + window.csapps.store_domain + '/cart/update.js') > -1 || res.url.toString().indexOf('https://' + window.csapps.store_domain + '/cart/change.js') > -1 || res.url.toString().indexOf('https://' + window.csapps.store_domain + '/cart/change.js?t=') > -1 || res.url.toString().indexOf('https://' + window.csapps.store_domain + '/cart/change') > -1 || res.url.toString().indexOf('https://' + window.csapps.store_domain + '/cart/clear.js') > -1 || res.url.toString().indexOf('https://' + window.csapps.store_domain + '/cart?view=ajax') > -1 || (res.url.toString().indexOf('https://' + window.csapps.store_domain) > -1 && res.url.toString().indexOf('/cart/change') > -1))) {
              var count = 1;
              if (typeof csappsStart === "function") {
                csappsStart(count);
              }
            }
          });
          return response;
        }
      }(window, window.fetch))
      const send = XMLHttpRequest.prototype.send
      XMLHttpRequest.prototype.send = function () {
        this.addEventListener('load', function () {
          if (window.csapps.firing_popup == 0 && this.responseURL.toString().indexOf('csapp=aiod') == -1 && (this.responseURL.toString().indexOf('https://' + window.csapps.store_domain + '/cart/change') > -1 || this.responseURL.toString().indexOf('https://' + window.csapps.store_domain + '/cart?view=ajax') > -1 || this.responseURL.toString().indexOf('https://' + window.csapps.store_domain + '/cart/add.js') > -1 || this.responseURL.toString().indexOf('https://' + window.csapps.store_domain + '/cart/change.js?line=') > -1 || (this.responseURL.toString() == 'https://' + window.csapps.store_domain + '/cart.js' && !ignore_csapp_cart_reload) || this.responseURL.toString() == 'https://' + window.csapps.store_domain + '/cart' || this.responseURL.toString() == 'https://' + window.csapps.store_domain + '/cart/update.js' || this.responseURL.toString() == 'https://' + window.csapps.store_domain + '/cart/change.js' || this.responseURL.toString() == 'https://' + window.csapps.store_domain + '/cart/clear.js' || (this.responseURL.toString().indexOf('https://' + window.csapps.store_domain) > -1 && this.responseURL.toString().indexOf('/cart/change') > -1))) {
            var count = 1;
            if (typeof csappsStart === "function") {
              csappsStart(count);
            }
          }
        })
        return send.apply(this, arguments)
      }
    }, true);
</script>
